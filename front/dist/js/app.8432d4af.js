(function(){"use strict";var t={2849:function(t,e,s){s(3500),s(9585);var a=s(2856),i=s(1501);a["default"].use(i.Ay$);s(4114);var n=s(417),r=s(1594),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hello"},[e("b-jumbotron",{attrs:{header:"Floaty",lead:"–°–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ —É–¥–æ–±–æ–Ω–æ, –±—ã—Å—Ç—Ä–æ, –Ω–∞–¥–µ–∂–Ω–æ"}},[e("h1",[t._v(t._s(t.msg))]),e("p",[t._v("For more information visit website")]),e("b-button",{attrs:{variant:"primary",href:"/about"}},[t._v("More Info")])],1),e("b-container",[e("section",{staticClass:"about"},[e("h2",[t._v("–û –Ω–∞—Å")]),e("p",[t._v("–ú—ã - –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –ú—ã —Å–æ–∑–¥–∞–ª–∏ Floaty, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å —É—á–µ–±–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, —É–º–µ–Ω—å—à–∏–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.")]),e("img",{attrs:{src:"https://via.placeholder.com/300",alt:"–û –Ω–∞—Å"}})]),e("section",{staticClass:"strong-sides"},[e("h2",[t._v("–ù–∞—à–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã")]),e("b-row",[e("b-col",{attrs:{md:"4"}},[e("b-card",[e("b-card-body",[e("b-card-title",[t._v("–û–ø—ã—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤")]),e("b-card-text",[t._v("–ú—ã –∏–º–µ–µ–º –æ–ø—ã—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç —É–ª—É—á—à–∏—Ç—å —É—á–µ–±–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å.")])],1)],1)],1),e("b-col",{attrs:{md:"4"}},[e("b-card",[e("b-card-body",[e("b-card-title",[t._v("–ó–Ω–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π —Å—Ñ–µ—Ä—ã")]),e("b-card-text",[t._v("–ú—ã —Ö–æ—Ä–æ—à–æ –∑–Ω–∞–µ–º –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—É—é —Å—Ñ–µ—Ä—É –∏ –ø–æ–Ω–∏–º–∞–µ–º, –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ—à–∏—Ç—å.")])],1)],1)],1),e("b-col",{attrs:{md:"4"}},[e("b-card",[e("b-card-body",[e("b-card-title",[t._v("–ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤")]),e("b-card-text",[t._v("–ú—ã - –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç –æ–ø—ã—Ç –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.")])],1)],1)],1)],1)],1),e("section",{staticClass:"possibilities"},[e("h2",[t._v("–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Floaty")]),e("b-row",[e("b-col",{attrs:{md:"4"}},[e("b-card",[e("b-card-body",[e("b-card-title",[t._v("–ë—ã—Å—Ç—Ä–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å")]),e("b-card-text",[t._v("Floaty –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç—á–µ—Ç—ã, —Å–æ—Ö—Ä–∞–Ω—è—è –≤—Ä–µ–º—è –∏ —É—Å–∏–ª–∏—è.")])],1)],1)],1),e("b-col",{attrs:{md:"4"}},[e("b-card",[e("b-card-body",[e("b-card-title",[t._v("–£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å")]),e("b-card-text",[t._v("Floaty –∏–º–µ–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–≥–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.")])],1)],1)],1),e("b-col",{attrs:{md:"4"}},[e("b-card",[e("b-card-body",[e("b-card-title",[t._v("–£–ª—É—á—à–µ–Ω–∏–µ —É—á–µ–±–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞")]),e("b-card-text",[t._v("Floaty –ø–æ–º–æ–≥–∞–µ—Ç —É–ª—É—á—à–∏—Ç—å —É—á–µ–±–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, —É–º–µ–Ω—å—à–∏–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —É—á–∏—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.")])],1)],1)],1)],1)],1),e("section",{staticClass:"origin"},[e("h2",[t._v("–ù–∞—á–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è")]),e("p",[t._v('–ú—ã –Ω–∞—á–∞–ª–∏ –Ω–∞—à –ø—Ä–æ–µ–∫—Ç –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ "–ù–æ–≤–∞—è –®–∫–æ–ª–∞", –≥–¥–µ –º—ã —Ä–∞–±–æ—Ç–∞–ª–∏ –Ω–∞–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.')]),e("img",{attrs:{src:"https://via.placeholder.com/300",alt:"–ù–∞—á–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è"}})]),e("section",{staticClass:"contact"},[e("h2",[t._v("–ö–æ–Ω—Ç–∞–∫—Ç—ã")]),e("p",[t._v("–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏.")]),e("img",{attrs:{src:"https://via.placeholder.com/300",alt:"–ö–æ–Ω—Ç–∞–∫—Ç—ã"}})])])],1)},l=[],c={name:"HelloWorld",props:{msg:String}},d=c,u=s(1656),h=(0,u.A)(d,o,l,!1,null,null,null),p=h.exports,m=function(){var t=this,e=t._self._c;return e("b-container",{staticClass:"d-flex align-items-center justify-content-center min-vh-100 bg-light",attrs:{fluid:""}},[e("b-card",{staticClass:"shadow-sm",staticStyle:{width:"400px"}},[e("b-overlay",{attrs:{show:t.isLoading}},[t.isShowLogin?e("b-card-body",[e("h4",{staticClass:"card-title text-center"},[t._v("–í—Ö–æ–¥")]),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"–õ–æ–≥–∏–Ω","label-for":"login"}},[e("b-form-input",{attrs:{id:"login",type:"text",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("b-form-group",{staticClass:"mb-2",attrs:{label:"–ü–∞—Ä–æ–ª—å","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",type:"password",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e("b-form-checkbox",{staticClass:"mb-3",model:{value:t.rememberMe,callback:function(e){t.rememberMe=e},expression:"rememberMe"}},[t._v(" –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è? ")]),e("b-alert",{attrs:{variant:t.alertVariant,dismissible:""},on:{dismissed:function(e){t.showAlert=!1}},model:{value:t.showAlert,callback:function(e){t.showAlert=e},expression:"showAlert"}},[t._v(" "+t._s(t.alertMessage)+" ")]),t.hasRefreshCookie?e("div",[e("p",[t._v(" –ê –º—ã –≤–∞—Å –ø–æ–º–Ω–∏–º :) "),e("br"),e("b-button",{staticClass:"mt-1",on:{click:function(e){t.isShowRoles=!0}}},[t._v("–í–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–µ—Å—Å–∏—é?")])],1)]):t._e(),e("b-button",{attrs:{type:"submit",variant:"primary",block:"",disabled:t.isShowRoles}},[t._v("–í–æ–π—Ç–∏")])],1),e("div",{staticClass:"text-center mt-2"},[e("router-link",{staticStyle:{"text-decoration":"underline"},attrs:{to:"/signup/invite"}},[t._v(" –ï—Å—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ? ")])],1)],1):t._e(),t.isShowRoles?e("b-card-body",{staticClass:"mt-3"},[e("h5",{staticClass:"mb-2"},[t._v(" –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, "+t._s(t.actualUserName)+" üëã ")]),e("RoleSelect")],1):t._e()],1)],1)],1)},b=[],f=function(){var t=this,e=t._self._c;return e("b-card",{attrs:{title:"–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å",align:"center"}},[e("b-list-group",[e("b-list-group-item",{class:{disabled:!t.userRoles.includes("teacher")},attrs:{href:"/user"}},[t._v(" –ö–ª–∞—Å—Å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å ")]),e("b-list-group-item",{class:{disabled:!t.userRoles.includes("admin")},attrs:{href:"/org"}},[t._v(" –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä ")])],1)],1)},v=[],_=s(9617),g={name:"roleSelect",data(){return{userRoles:[]}},methods:{includes:_.includes,async getRoles(){try{const t=await this.$makeApiRequest("/api/roles");this.userRoles=t.roles}catch(t){console.error("Failed to fetch user roles:",t)}}},mounted(){this.getRoles()}},w=g,y=(0,u.A)(w,f,v,!1,null,"57c74044",null),C=y.exports,k={name:"LoginPage",components:{RoleSelect:C},data(){return{username:"",password:"",rememberMe:!1,showAlert:!1,alertMessage:"",alertVariant:"success",hasRefreshCookie:!1,isLoading:!1,isShowLogin:!0,isShowRoles:!1,actualUserName:""}},async mounted(){await this.checkForRefreshToken()},methods:{async loginProcess(){await new Promise((t=>setTimeout(t,1500))),this.showAlert=!0,this.isLoading=!1,await new Promise((t=>setTimeout(t,400)))},async successfulLogin(t){console.log(t),this.alertMessage="–£—Å–ø–µ—à–Ω–æ!",this.alertVariant="success",await this.loginProcess(),this.actualUserName=t.data.user.name,this.isShowRoles=!0},async checkForRefreshToken(){},onSubmit(){this.isLoading=!0,n.A.post("/api/login",{login:this.username,password:this.password,rememberMe:this.rememberMe}).then((t=>{this.successfulLogin(t)})).catch((t=>{this.loginProcess(),502===t.response.status&&(this.alertMessage="API-—Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ. –ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞",this.alertVariant="warning"),400===t.response.status&&(this.alertMessage="–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å",this.alertVariant="danger")}))}}},$=k,S=(0,u.A)($,m,b,!1,null,"063ab54c",null),x=S.exports,D=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("h2",{staticClass:"card-title text-center mb-0"},[t._v("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è")]),e("h4",{staticClass:"text-center pt-0"},[t._v("—Å –ø–æ–º–æ—â—å—é –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è")]),e("div",{staticClass:"flex-container container"},[e("div",{staticClass:"progress",style:t.pBarSize},[e("div",{staticClass:"progress-bar",style:t.progress,attrs:{role:"progressbar","aria-valuenow":"60","aria-valuemin":"0","aria-valuemax":"100"}})]),t._l(t.stepper.steps,(function(s,a){return e("div",{key:a,staticClass:"step",class:{done:s.number<t.stepper.currentStep&&s.state(),wrong:s.number<t.stepper.currentStep&&!s.state(),current:s.number===t.stepper.currentStep}},[e("div",{staticClass:"step-label"},[t._v(t._s(s.label))]),e("div",{staticClass:"step-number",attrs:{id:"step-"+s.number},on:{click:function(e){return t.moveStep(s.number)}}},[s.number<t.stepper.currentStep?e("i",{staticClass:"fa fa-check"}):e("span",[t._v(t._s(s.number))])])])}))],2),e("div",{staticClass:"container"},[1===t.stepper.currentStep?e("b-card-body",[e("h5",{staticClass:"text-center"},[t._v("–í–≤–µ–¥–∏—Ç–µ ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª–∞ –≤–∞–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ")]),e("b-form-group",{attrs:{label:"ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏"}},[e("div",{staticClass:"d-flex"},[e("b-form-input",{attrs:{state:t.isOrgValid},on:{input:t.checkOrg},model:{value:t.v_orgID,callback:function(e){t.v_orgID=e},expression:"v_orgID"}}),e("b-button",{attrs:{variant:"primary"},on:{click:function(e){return e.stopPropagation(),t.checkOrg.apply(null,arguments)}}},[e("b-icon",{attrs:{icon:"arrow-return-right"}})],1)],1)]),e("b-card",[t.isOrgSelected&&t.isOrgValid?e("div",[e("b-card-title",[e("i",[t._v(t._s(t.orgData.title))])]),e("b-card-body",[e("p",[t._v(" –ì–æ—Ä–æ–¥ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏: "),e("i",[t._v(t._s(t.orgData.city))])]),e("p",[t._v(" –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: "),e("i",[t._v(t._s(t.orgData.email))])])])],1):t.isOrgSelected&&!t.isOrgValid?e("div",[e("h3",[t._v("–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å –¥–∞–Ω–Ω—ã–º ID –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")])]):e("div",[e("p",[t._v("–í–≤–µ–¥–∏—Ç–µ ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏")])])]),e("b-button",{staticClass:"alert-success mt-2",attrs:{disabled:!(t.isOrgSelected&&t.isOrgValid),role:"button"},on:{click:function(e){return t.moveStep(t.stepper.currentStep+1)}}},[t._v(" –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ")])],1):2===t.stepper.currentStep?e("b-card-body",[e("h4",{staticClass:"card-title text-center mb-0"},[t._v("–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è")]),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"ID –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è","label-for":"login"}},[e("b-form-input",{attrs:{id:"login",type:"text",required:"",state:t.isInviteValid,placeholder:"–í–≤–µ–¥–∏—Ç–µ id"},on:{input:t.checkInvite},model:{value:t.invite.id,callback:function(e){t.$set(t.invite,"id",e)},expression:"invite.id"}})],1),e("b-form-group",{staticClass:"mb-2",attrs:{label:"–°–µ–∫—Ä–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",type:"text",required:"",state:t.isInviteValid,placeholder:"–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç"},on:{input:t.checkInvite},model:{value:t.invite.secret,callback:function(e){t.$set(t.invite,"secret",e)},expression:"invite.secret"}})],1),t.isInviteValid?e("b-card",[e("b-card-title",[e("i",[t._v(t._s(t.inviteData.userName)+" ")])]),e("b-card-body",[e("p",[t._v("–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ–ª–∏: "),e("i",[t._v(" "+t._s(t.inviteData.roles.join(", "))+" ")])]),e("p",[t._v("–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª–∞—Å—Å—ã: "),e("i",[t._v(" "+t._s(t.inviteData.classes.map((t=>t.name)).join(", "))+" ")])])])],1):t._e()],1),e("b-button",{staticClass:"btn alert-success mt-2",attrs:{disabled:!(t.isInviteWrited&&t.isInviteValid),role:"button"},on:{click:function(e){return t.moveStep(t.stepper.currentStep+1)}}},[t._v("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å")])],1):t._e(),3===t.stepper.currentStep?e("b-card-body",[e("h4",{staticClass:"card-title text-center mb-0"},[t._v("–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å")]),e("h6",{staticClass:"text-center"},[t._v("–£—á—Ç–∏—Ç–µ —á—Ç–æ, –≤ –æ—Ç–ª–∏—á–∏–∏ –æ—Ç –ø–∞—Ä–æ–ª—è, –ª–æ–≥–∏–Ω –∏–∑–º–µ–Ω–∏—Ç—å –±—É–¥–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.")]),e("h5",{staticClass:"mb-2"},[t._v(" "+t._s(t.inviteData.actualUserName)+" ")]),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"–õ–æ–≥–∏–Ω","label-for":"login"}},[e("b-form-input",{attrs:{id:"login",type:"text",required:"",state:t.isCredsValid,placeholder:"–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω"},on:{change:t.checkCreds},model:{value:t.userCreds.login,callback:function(e){t.$set(t.userCreds,"login",e)},expression:"userCreds.login"}})],1),e("b-form-group",{staticClass:"mb-2",attrs:{label:"–ü–∞—Ä–æ–ª—å","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",type:"text",required:"",state:t.isCredsValid,placeholder:"–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"},on:{change:t.checkCreds},model:{value:t.userCreds.password,callback:function(e){t.$set(t.userCreds,"password",e)},expression:"userCreds.password"}})],1),e("b-form-group",{staticClass:"mb-2",attrs:{label:"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",type:"text",required:"",state:t.isCredsValid,placeholder:"–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"},on:{change:t.checkCreds},model:{value:t.userCreds.password2,callback:function(e){t.$set(t.userCreds,"password2",e)},expression:"userCreds.password2"}})],1)],1),e("b-button",{staticClass:"btn alert-success mt-2",attrs:{disabled:!t.isCredsValid,role:"button"},on:{click:function(e){return t.moveStep(t.stepper.currentStep+1)}}},[t._v("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å")])],1):t._e(),4===t.stepper.currentStep?e("b-card-body",[e("h4",{staticClass:"card-title text-center mb-0"},[t._v("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤–≤–µ–¥—ë–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ")]),e("div",{attrs:{id:"statusFill"}},[e("b-alert",{attrs:{variant:"success",dismissible:"",show:t.isOrgValid}},[t._v(" –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. ")]),e("b-alert",{attrs:{variant:"danger",dismissible:"",show:!t.isOrgValid}},[t._v(" –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –Ω–µ –≤—ã–±—Ä–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ 1-–æ–º—É —à–∞–≥—É. ")]),e("b-alert",{attrs:{variant:"success",dismissible:"",show:t.isInviteValid}},[t._v(" –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ. ")]),e("b-alert",{attrs:{variant:"danger",dismissible:"",show:!t.isInviteValid}},[t._v(" –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ 2-–æ–º—É —à–∞–≥—É. ")]),e("b-alert",{attrs:{variant:"success",dismissible:"",show:t.isCredsValid}},[t._v(" –†–µ–∫–≤–µ–∑–∏—Ç—ã –¥–ª—è –≤–æ—Ö–¥–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. ")]),e("b-alert",{attrs:{variant:"danger",dismissible:"",show:!t.isCredsValid}},[t._v(" –†–µ–∫–≤–µ–∑–∏—Ç—ã –¥–ª—è –≤—Ö–æ–¥–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ 3-–æ–º—É —à–∞–≥—É. ")]),e("b-alert",{attrs:{variant:"danger",dismissible:"",show:t.isLoginInUse&&t.isLoginCheckPass}},[t._v(" –õ–æ–≥–∏–Ω —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π. ")])],1),e("b-card",[e("b-card-title",[t._v(" –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è "),e("i",[t._v(t._s(this.orgData.title)+" ")])]),e("b-card-body",[e("p",[t._v("–ì–æ—Ä–æ–¥: "+t._s(this.orgData.city))]),e("p",[t._v("–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: "+t._s(this.orgData.email)+" ")])])],1),e("b-card",[e("b-card-title",[t._v(" –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ: "),e("i",[t._v(t._s(this.invite.id)+" - "+t._s(this.invite.secret))]),t._v("1 ")])],1),e("b-card",{attrs:{title:"–†–µ–∫–≤–µ–∑–∏—Ç—ã –¥–ª—è –≤—Ö–æ–¥–∞"}},[e("b-card-body",[e("p",[t._v("–õ–æ–≥–∏–Ω: "),e("i",[t._v(t._s(this.userCreds.login))])]),e("p",[t._v("–ü–∞—Ä–æ–ª—å: "),e("i",[t._v(t._s(this.userCreds.password))])])])],1),e("b-button",{attrs:{variant:"primary",disabled:1!==(t.isOrgValid^t.isInviteValid^t.isCredsValid)},on:{click:function(e){return e.stopPropagation(),t.createUserWithInvite.apply(null,arguments)}}},[t._v("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å")]),1!==(t.isOrgValid^t.isInviteValid^t.isCredsValid)?e("h6",[t._v("–û–¥–∏–Ω –∏–∑ —à–∞–≥–æ–≤ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –∏–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω, –Ω–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")]):t._e(),e("b-alert",{attrs:{variant:"success",show:t.isSuccessCreate}},[t._v(" –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω. –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ "),e("router-link",{attrs:{to:"/login"}},[t._v("—ç—Ç–æ–π")]),t._v(" —Å—Å—ã–ª–∫–µ, —á—Ç–æ–±—ã –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É ")],1),e("b-alert",{attrs:{variant:"warning",show:t.isLoginInUse}},[t._v(" –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –¥–∞–Ω–Ω—ã–º –ª–æ–≥–∏–Ω–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥—Ä—É–≥–æ–π –ª–æ–≥–∏–Ω ")])],1):t._e()],1),t.stepper.currentStep>1&&t.stepper.currentStep<=t.stepper.steps.length?e("div",{staticClass:"col-sm-12"},[t.stepper.currentStep>1?e("button",{staticClass:"btn btn-default",attrs:{role:"button"},on:{click:function(e){return t.moveStep(t.stepper.currentStep-1)}}},[e("b-icon",{staticClass:"fa",attrs:{icon:"chevron-left","aria-hidden":"true"}})],1):t._e(),t.stepper.currentStep<t.stepper.steps.length?e("button",{staticClass:"btn btn-default pull-right",attrs:{role:"button"},on:{click:function(e){return t.moveStep(t.stepper.currentStep+1)}}},[t._v("Next "),e("i",{staticClass:"fa fa-chevron-right",attrs:{"aria-hidden":"true"}})]):t._e()]):e("div",[e("button",{staticClass:"btn btn-default btn-block",attrs:{role:"button"},on:{click:function(e){return t.moveStep(1)}}},[t._v("Reset "),e("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})])])])},I=[function(){var t=this,e=t._self._c;return e("nav",{staticClass:"navbar navbar-default"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"navbar-header"},[e("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e("i",{staticClass:"fa fa-codepen fa-lg"})])])])])}],A={name:"signupInvite",props:{orgID:{type:String,required:!1}},async mounted(){const t=""!==this.orgID;t?await this.checkOrg():(this.isOrgValid=!1,this.isOrgSelected=!1)},data(){return{showAlert:!1,alertMessage:"",alertVariant:"success",isLoading:!1,stepper:{steps:[{number:1,label:"–í—ã–±–æ—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏",state:()=>this.isOrgValid},{number:2,label:"–í–≤–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è",state:()=>this.isInviteWrited&&this.isInviteValid},{number:3,label:"–†–µ–∫–≤–µ–∑–∏—Ç—ã –¥–ª—è –≤—Ö–æ–¥–∞",state:()=>this.isCredsValid},{number:4,label:"–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ"}],currentStep:1},isOrgSelected:!1,isOrgValid:null,isInviteWrited:!1,isInviteValid:null,isCredsWrited:!1,isCredsValid:null,isLoginCheckPass:!1,isLoginInUse:!1,isSuccessCreate:!1,v_orgID:this.orgID,orgData:{name:"",city:"",email:""},invite:{id:"",secret:""},inviteData:{userName:"",roles:[],classes:[]},userCreds:{login:"",password:"",password2:""},pBarSize:"",progress:""}},computed:{isSuccessOrgStep(){return this.isOrgSelected&&this.isOrgValid}},methods:{async createUserWithInvite(){if(this.isOrgValid^this.isInviteValid^this.isCredsValid){if(confirm("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∏–Ω–∞—á–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É –±—É–¥–µ—Ç –±–æ–ª–µ–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ")){const t=await this.$root.$makeApiRequest(`/api/signup/invite/${this.v_orgID}`,"POST",{invite:{code:this.invite.id,secret:this.invite.secret},user:{login:this.userCreds.login,password:this.userCreds.password}});204===t?this.isSuccessCreate=!0:409===t&&(this.isSuccessCreate=!1,this.isLoginInUse=!0)}}else alert("–û–¥–∏–Ω –∏–∑ —à–∞–≥–æ–≤ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω –∏–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω, –Ω–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")},moveStep(t){this.stepper.currentStep=t},async checkOrg(){""!==this.v_orgID?(this.isOrgSelected=!0,this.isOrgValid=await this.isValidUUID(this.v_orgID)):(this.isOrgSelected=!1,this.isOrgValid=!1)},async checkInvite(){if(""!==this.invite.id&&""!==this.invite.secret){const t=await this.$root.$makeApiRequest(`/api/invite/${this.v_orgID}/${this.invite.id}/${this.invite.secret}`);console.log(t),200===t.status?(this.inviteData.userName=t.invite.name,this.inviteData.roles=t.invite.roles,this.inviteData.classes=t.invite.classes,this.isInviteValid=!0):this.isInviteValid=!1,this.isInviteWrited=!0}else this.isInviteWrited=!1},checkCreds(){""!==this.userCreds.login&&""!==this.userCreds.password&&""!==this.userCreds.password2&&(this.isCredsValid=""!==this.userCreds.login&&""!==this.userCreds.password&&""!==this.userCreds.password2&&this.userCreds.password===this.userCreds.password2)},async isValidUUID(t){const e=""!==this.v_orgID;if(!e)return this.isOrgSelected=!0,this.isOrgValid=!1,!1;try{const e=await this.$root.$makeApiRequest(`/api/org/${t}/info`);return 200===e.status&&(this.orgData.title=e.org.title||"-",this.orgData.city=e.org.city||"-",this.orgData.email=e.org.email||"-",!0)}catch(s){return console.error(s),!1}}}},O=A,R=(0,u.A)(O,D,I,!1,null,"940ae8b8",null),T=R.exports,M=function(){var t=this,e=t._self._c;return e("b-overlay",{attrs:{show:t.firstLoading}},[e("b-container",{staticClass:"d-flex align-items-center justify-content-center min-vh-100 bg-light",attrs:{fluid:""}},[e("b-row",[e("b-card",{attrs:{title:t.title}},[!t.isClassChosen&&t.hasAccess?e("b-col",[e("choseClass")],1):t.isClassChosen&&t.hasAccess?e("b-col",[e("userForm",{attrs:{classData:t.chosenClass}})],1):t._e(),t.showForbidden?e("b-col",[e("h1",[t._v("–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ")])]):t._e()],1)],1)],1)],1)},F=[],V=function(){var t=this,e=t._self._c;return e("b-overlay",{attrs:{show:t.loadingClasses}},[e("b-list-group",t._l(t.classes,(function(s,a){return e("b-list-group-item",{key:a,class:{active:t.isActive(s)},attrs:{id:a,role:"button",tabindex:"0"},on:{click:function(e){return t.chooseClass(s)},keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.chooseClass(s)}}},[t._v(" "+t._s(s.name)+" ")])})),1)],1)},E=[],N={name:"choseClass",data(){return{loadingClasses:!1,classes:[]}},async mounted(){const t=await this.$root.$makeApiRequest("/api/user/classes");this.classes=t.classes},created(){this.loadingClasses=!0,this.classes=[],this.loadingClasses=!1},methods:{chooseClass(t){this.selectedClass=t,this.$root.$emit("class:select",this.selectedClass)},isActive(t){return this.selectedClass===t}}},L=N,U=(0,u.A)(L,V,E,!1,null,"221ef3de",null),j=U.exports,P=function(){var t=this,e=t._self._c;return e("b-container",{staticClass:"vh-100 p-5"},[e("b-card",{},[e("b-card-body",[e("b-row",{staticClass:"justify-content-center"},[e("b-col",[e("notificationsForm"),e("b-form",{attrs:{title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ"},on:{submit:function(e){return e.preventDefault(),t.selectStudent.apply(null,arguments)}}},[e("h4",[t._v(" –ö–ª–∞—Å—Å: "),e("b",[t._v(t._s(t.chosenClass.name))])]),e("b-container",{attrs:{fluid:""}},[e("b-dropdown",{staticClass:"mb-3",attrs:{size:"sm",variant:"outline-secondary",block:"","menu-class":"dropdown-scrollable w-100"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon",{attrs:{icon:"person-fill"}}),t._v(" "+t._s(t.selectedStudentText)+" ")]},proxy:!0}])},[e("b-dropdown-form",[e("b-form-group",{staticClass:"mb-0",attrs:{label:"–ü–æ–∏—Å–∫ —É—á–µ–Ω–∏–∫–∞:","label-for":"student-search-input","label-cols-md":"auto","label-size":"sm"}},[e("b-form-input",{attrs:{id:"student-search-input",type:"search",size:"sm",autocomplete:"off",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏–ª–∏ —Ñ–∞–º–∏–ª–∏—é —É—á–µ–Ω–∏–∫–∞"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1)],1),t._l(t.availableStudents,(function(s){return e("b-dropdown-item",{key:s.value,class:{"text-danger":s.fstudent,"text-muted":s.disabled},attrs:{disabled:s.disabled},on:{click:function(e){!s.disabled&&t.selectStudent(s.value)}}},[t._v(" "+t._s(s.text)+" "),s.disabled?e("span",{staticClass:"text-muted"},[t._v(" (–£–∂–µ –≤ —Å–ø–∏—Å–∫–µ "+t._s(s.list)+") ")]):t._e(),s.fstudent?e("span",{staticClass:"text-warning"},[t._v("(–ë–µ—Å–ø–ª–∞—Ç–Ω–∏–∫)")]):t._e()])}))],2),e("b-row",{staticClass:"g-3"},[e("b-col",{attrs:{xs:"12",md:"4"}},[e("h6",[t._v("–°–ø–∏—Å–æ–∫ –û–†–í–ò —É—á–µ–Ω–∏–∫–æ–≤:")]),e("b-list-group",[t._l(t.chosenClass.absent.ORVI,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(s)+" "),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:function(e){return t.removeORVITag(a)}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)})),e("b-button",{attrs:{variant:"primary",block:""},on:{click:t.addORVIStudent}},[t._v(" –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞ ")])],2)],1),e("b-col",{staticClass:"mt-2",attrs:{xs:"12",md:"4"}},[e("h6",[t._v("–°–ø–∏—Å–æ–∫ —É–≤–∞–∂. –ø—Ä–∏—á. —É—á–µ–Ω–∏–∫–æ–≤:")]),e("b-list-group",[t._l(t.chosenClass.absent.respectful,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(s)+" "),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:function(e){return t.removeRespTag(a)}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)})),e("b-button",{attrs:{variant:"primary",block:""},on:{click:t.addRespStudent}},[t._v(" –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞ ")])],2)],1),e("b-col",{staticClass:"mt-2",attrs:{xs:"12",md:"4"}},[e("h6",[t._v("–°–ø–∏—Å–æ–∫ –Ω–µ—É–≤–∞–∂. –ø—Ä–∏—á. —É—á–µ–Ω–∏–∫–æ–≤:")]),e("b-list-group",[t._l(t.chosenClass.absent.not_respectful,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(s)+" "),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:function(e){return t.removeNotRespTag(a)}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)})),e("b-button",{attrs:{variant:"primary",block:""},on:{click:t.addNotRespStudent}},[t._v(" –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞ ")])],2)],1)],1),e("b-row",[e("div",{staticClass:"mt-4 border-top",staticStyle:{"justify-content":"end"}},[e("b-button",{attrs:{block:"",variant:"primary"},on:{click:t.submitForm}},[t._v(" –û—Ç–ø—Ä–∞–≤–∏—Ç—å ")])],1)])],1)],1)],1)],1)],1)],1)],1)},q=[],Q=(s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),function(){var t=this,e=t._self._c;return e("div",t._l(t.notifications,(function(s,a){return e("b-alert",{key:a,attrs:{variant:s.variant,show:"",dismissible:""},on:{dismissed:function(e){return t.removeNotification(a)}}},[t._v(" "+t._s(s.msg)+" ")])})),1)}),H=[],z={name:"notificationsForm",data(){return{notifications:[]}},beforeMount(){this.$root.$off("notification")},mounted(){this.$root.$on("notification",((t,e)=>{switch(t){case"success":this.notifications.push({variant:"success",msg:"–£—Å–ø–µ—à–Ω–æ!"});break;case"error":this.notifications.push({variant:"danger",msg:"–û—à–∏–±–∫–∞!"});break;case"warning":this.notifications.push({variant:"warning",msg:e});break;case"status":200===e.status||204===e.status?this.$root.$emit("notification","success",""):this.$root.$emit("notification","error",e);break}}))},methods:{removeNotification(t){this.$emit("notification-remove",t)}}},W=z,B=(0,u.A)(W,Q,H,!1,null,"48349c1e",null),G=B.exports,J={name:"userForm",components:{notificationsForm:G},data(){return{classID:"",chosenClass:{absent:{ORVI:[],respectful:[],not_respectful:[]}},classData:{},students:[],selectedStudent:"",searchQuery:""}},async mounted(){this.classID=this.$route.params.classID,this.chosenClass={...await this.$root.$makeApiRequest("/api/user/classes/"+this.classID),absent:{ORVI:[],respectful:[],not_respectful:[]}},console.log(this.chosenClass)},computed:{availableStudents(){const t={ORVI:new Set(this.chosenClass.absent.ORVI),respectful:new Set(this.chosenClass.absent.respectful),not_respectful:new Set(this.chosenClass.absent.not_respectful),fstudents:new Set(this.chosenClass.absent.fstudents)};return this.chosenClass.students.map((e=>{const s=t.ORVI.has(e),a=t.respectful.has(e),i=t.not_respectful.has(e),n=t.fstudents.has(e);return{value:e,text:e,disabled:s||a||i,fstudent:n,list:s?"–û–†–í–ò":a?"–£–≤–∞–∂. –ø—Ä–∏—á.":i?"–ù–µ—É–≤–∞–∂. –ø—Ä–∏—á.":""}})).filter((t=>t.text.toLowerCase().includes(this.searchQuery.toLowerCase())))},selectedStudentText(){return this.selectedStudent||"–í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞"}},methods:{async submitForm(){const t=await this.$root.$makeApiRequest("/api/user/classes/"+this.chosenClass.id+"/data","PUT",{absent:{...this.chosenClass.absent}});200===t||204===t?this.$root.$emit("notification","success"):this.$root.$emit("notification","error","–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ")},selectStudent(t){this.selectedStudent=t},isStudentFree(){return this.selectedStudent&&!this.chosenClass.absent.ORVI.includes(this.selectedStudent)&&!this.chosenClass.absent.respectful.includes(this.selectedStudent)&&!this.chosenClass.absent.not_respectful.includes(this.selectedStudent)},addORVIStudent(){this.isStudentFree()&&(this.chosenClass.absent.ORVI.push(this.selectedStudent),this.selectedStudent="",this.searchQuery="")},addRespStudent(){this.isStudentFree()&&(this.chosenClass.absent.respectful.push(this.selectedStudent),this.selectedStudent="",this.searchQuery="")},addNotRespStudent(){this.isStudentFree()&&(this.chosenClass.absent.not_respectful.push(this.selectedStudent),this.selectedStudent="",this.searchQuery="")},removeORVITag(t){this.chosenClass.absent.ORVI.splice(t,1)},removeRespTag(t){this.chosenClass.absent.respectful.splice(t,1)},removeNotRespTag(t){this.chosenClass.absent.not_respectful.splice(t,1)}}},X=J,Y=(0,u.A)(X,P,q,!1,null,null,null),K=Y.exports,Z={name:"UserView",components:{choseClass:j,userForm:K},data(){return{isClassChosen:!1,chosenClass:{},chosenClassBody:{},showForbidden:!1,hasAccess:!0,firstLoading:!0}},computed:{title(){return this.isClassChosen?"–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É":"–í—ã–±–µ—Ä–∏—Ç–µ –∫–ª–∞—Å—Å"}},async mounted(){this.firstLoading=!0,await new Promise((t=>setTimeout(t,600)));try{this.hasAccess=await this.$root.$checkAccessRole("teacher"),this.hasAccess||(this.showForbidden=!0)}catch(t){console.error("Error checking access:",t),this.hasAccess=!1}finally{this.firstLoading=!1}this.$root.$on("class:select",(t=>{this.chosenClass=t,this.isClassChosen=!0,pe.push("/form/"+t.id)}))},methods:{returnToClasses(){this.chosenClass={},this.isClassChosen=!1}}},tt=Z,et=(0,u.A)(tt,M,F,!1,null,"af9df366",null),st=et.exports,at=function(){var t=this,e=t._self._c;return e("b-overlay",{attrs:{show:t.firstLoading}},[e("b-container",{staticClass:"bv-example-row",attrs:{fluid:""}},[e("b-row",{staticClass:"text-center"},[t.hasAccess?e("b-col",{staticClass:"sidebar-l",class:{compact:t.compactMode}},[e("b-container",{staticStyle:{display:"flex","align-items":"center",padding:"0.5rem",height:"40px",cursor:"pointer"},on:{click:t.toggleCompactMode}},[e("b-icon",{attrs:{icon:"list",scale:"1.8"}}),t.compactMode?t._e():e("b",{staticStyle:{"margin-left":"10px"}},[t._v("–†–∞–∑–¥–µ–ª—ã")])],1),e("b-list-group",t._l(t.sections,(function(s){return e("div",{key:s.value,staticClass:"pr-0"},[e("b-list-group-item",{class:{active:t.activeSection===s.value,"d-flex justify-content-between":!0},on:{click:function(e){return e.stopPropagation(),t.handleSectionClick(s.value)}}},[e("div",{staticClass:"d-flex align-items-center w-100"},[e("b-icon",{attrs:{scale:"1",icon:s.icon}}),t.compactMode?t._e():e("div",{staticClass:"d-flex"},[e("span",{staticClass:"pr-1 pl-1"},[t._v(" | ")]),e("span",[t._v(t._s(s.label))])])],1),"data"!==s.value||t.compactMode?t._e():e("div",[e("b-container",{directives:[{name:"b-toggle",rawName:"v-b-toggle.additionalDataCollapse",modifiers:{additionalDataCollapse:!0}}],staticStyle:{display:"flex","align-items":"center","justify-content":"center",padding:"0.5rem",height:"40px",cursor:"pointer"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.showMoreData=!t.showMoreData}}},[t.showMoreData?e("b-icon",{attrs:{icon:"chevron-double-down",scale:"1.15"}}):e("b-icon",{attrs:{icon:"chevron-double-up",scale:"1.15"}})],1)],1)]),"data"!==s.value||t.compactMode?t._e():e("b-collapse",{attrs:{id:"additionalDataCollapse"}},[e("b-card-body",{staticClass:"pl-2 pr-2 pt-2 border border-top-0 border-dark"},[e("b-button-group",{staticClass:"w-100",attrs:{vertical:""}},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.dateInputCollapse",modifiers:{dateInputCollapse:!0}}]},[t._v("–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –¥–∞—Ç–∞")]),e("b-collapse",{staticClass:"d-flex align-self-center",attrs:{id:"dateInputCollapse"},model:{value:t.showCustomDateInput,callback:function(e){t.showCustomDateInput=e},expression:"showCustomDateInput"}},[t.showCustomDateInput?e("b-form-input",{attrs:{type:"date",placeholder:"–î–∞—Ç–∞"},model:{value:t.calendarDate,callback:function(e){t.calendarDate=e},expression:"calendarDate"}}):t._e(),t.showCustomDateInput?e("b-button",{attrs:{variant:"primary"},on:{click:function(e){return e.stopPropagation(),t.handleSectionClick("data","date")}}},[e("b-icon",{attrs:{icon:"arrow-return-right"}})],1):t._e()],1),e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.periodInputCollapse",modifiers:{periodInputCollapse:!0}}]},[t._v("–ü–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏ ")]),e("b-collapse",{staticClass:"d-flex flex-column align-self-center",attrs:{id:"periodInputCollapse"},model:{value:t.showPeriodInput,callback:function(e){t.showPeriodInput=e},expression:"showPeriodInput"}},[t.showPeriodInput?e("b-form-input",{attrs:{type:"date",placeholder:"–ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞"},model:{value:t.periodStartDate,callback:function(e){t.periodStartDate=e},expression:"periodStartDate"}}):t._e(),t.showPeriodInput?e("b-form-input",{attrs:{type:"date",placeholder:"–ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞"},model:{value:t.periodEndDate,callback:function(e){t.periodEndDate=e},expression:"periodEndDate"}}):t._e(),t.showPeriodInput?e("b-button",{staticClass:"pt-2 border-top",attrs:{variant:"primary"},on:{click:function(e){return e.stopPropagation(),t.handleSectionClick("data","period")}}},[t._v(" –ó–∞–ø—Ä–æ—Å–∏—Ç—å ")]):t._e()],1),e("b-button",{attrs:{variant:"success"},on:{click:function(e){return e.stopPropagation(),t.exportDataCall.apply(null,arguments)}}},[t._v("–≠–∫—Å–ø–æ—Ä—Ç")])],1)],1)],1)],1)})),0)],1):t._e(),t.hasAccess?e("b-col",{staticClass:"table"},[e("AdminContent",{attrs:{activeSection:t.contentSection}})],1):t._e(),t.hasAccess?e("b-col",{staticClass:"sidebar-r"},[e("b-calendar",{attrs:{"start-weekday":1}}),e("AdminContextMenu")],1):t._e(),t.hasAccess||t.firstLoading?t._e():e("b-col",[e("h1",[t._v("–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.")])])],1)],1)],1)},it=[],nt=function(){var t=this,e=t._self._c;return e("div",[t.isDataExists?e("div",[t.isDataLoaded&&"data"===t.activeSection?e("div",{staticClass:"mt-2"},[e("h5",[t._v(" –î–∞–Ω–Ω—ã–µ –∑–∞ "),e("b",[t._v(" "+t._s(this.tableDataDates)+" ")])])]):t._e(),e("b-table",{staticClass:"h-100",attrs:{items:t.table.items,fields:t.table.fields,busy:!t.isDataLoaded,selectable:"","select-mode":"single",hover:"",striped:"","sticky-header":"80vh","head-variant":"dark",bordered:"","no-border-collapse":"","row-class":t.rowClass},on:{export:t.exportExcel,"row-selected":t.onRowSelected},scopedSlots:t._u([{key:"cell(absent)",fn:function(s){return[e("div",[e("p",{staticStyle:{"margin-bottom":"8px"}},[t._v(" "+t._s(s.item.absent.global.join(", ")||"-")+" ("+t._s(s.item.absent.global.length||"0")+") "),t.isRowExpanded(s.item.id)?t._e():e("BIconArrowDown"),t.isRowExpanded(s.item.id)?e("BIconArrowUp"):t._e()],1),t.isRowExpanded(s.item.id)?e("b-collapse",{staticStyle:{display:"flex","justify-content":"flex-start"},attrs:{visible:""}},[e("b-list-group",{staticClass:"b-list-group-causes"},[e("b-list-group-item",{staticStyle:{"min-width":"140px"}},[e("strong",[t._v(" –û–†–í–ò: ")])]),e("b-list-group-item",{staticStyle:{"min-width":"140px"}},[e("strong",[t._v(" –£–≤–∞–∂. –ø—Ä–∏—á.: ")])]),e("b-list-group-item",{staticStyle:{"min-width":"140px"}},[e("strong",[t._v(" –ù–µ—É–≤–∞–∂. –ø—Ä–∏—á.: ")])]),e("b-list-group-item",{staticStyle:{"min-width":"140px"}},[e("strong",[t._v(" –ë–µ—Å–ø–ª–∞—Ç–Ω–∏–∫–∏: ")])])],1),e("b-list-group",{staticClass:"b-list-group-nums"},[e("b-list-group-item",[t._v(t._s(s.item.absent.ORVI.length)+" ")]),e("b-list-group-item",[t._v(t._s(s.item.absent.respectful.length)+" ")]),e("b-list-group-item",[t._v(t._s(s.item.absent.not_respectful.length)+" ")]),e("b-list-group-item",[t._v(t._s(s.item.absent.fstudents.length)+" ")])],1),e("b-list-group",{staticClass:"b-list-group-lists"},[e("b-list-group-item",[t._v(t._s(s.item.absent.ORVI.join(", ")||"-"))]),e("b-list-group-item",[t._v(t._s(s.item.absent.respectful.join(", ")||"-"))]),e("b-list-group-item",[t._v(t._s(s.item.absent.not_respectful.join(", ")||"-"))]),e("b-list-group-item",[t._v(" "+t._s(s.item.absent.global.filter((t=>s.item.absent.fstudents.includes(t))).join(", ")||"-")+" ")])],1)],1):t._e()],1)]}},{key:"cell(isClassDataFilled)",fn:function(t){return[e("div",[t.item.isClassDataFilled?e("BIconCheckCircle",{staticStyle:{color:"#28a745"},attrs:{scale:"1.3"}}):e("BIconDashCircle",{staticStyle:{color:"#dc3545"},attrs:{scale:"1.3"}})],1)]}},{key:"cell(owners)",fn:function(s){return t._l(s.item.owners,(function(s,a){return e("div",{key:a},[t._v(" "+t._s(s.name)+" ")])}))}},{key:"cell(classes)",fn:function(s){return t._l(s.item.classes,(function(s,a){return e("div",{key:a},[t._v(" "+t._s(s.name)+" ")])}))}},{key:"cell(students)",fn:function(e){return[t._v(" "+t._s(e.item.students.join(", "))+" ")]}},{key:"cell(roles)",fn:function(e){return[t._v(" "+t._s(e.item.roles.join(", "))+" ")]}},t.isActiveSectionData()&&t.isDataLoaded?{key:"custom-foot",fn:function(){return[e("tr",[e("td",[e("strong",[t._v("1-4 –∫–ª–∞—Å—Å—ã")])]),e("td",[t._v(" "+t._s(t.table.formulas.data["1_4"].global_amount()))]),e("td",[t._v(" "+t._s(t.table.formulas.data["1_4"].global_absentAmount()))])]),e("tr",[e("td",[e("strong",[t._v("5-11 –∫–ª–∞—Å—Å—ã")])]),e("td",[t._v(" "+t._s(t.table.formulas.data["5_11"].global_amount()))]),e("td",[t._v(" "+t._s(t.table.formulas.data["5_11"].global_absentAmount()))])]),e("tr",[e("td",[e("strong",[t._v("–í—Å–µ–≥–æ")])]),e("td",[t._v(" "+t._s(t.table.formulas.data["global"].global_amount()))]),e("td",[t._v(" "+t._s(t.table.formulas.data["global"].global_absentAmount()))])])]},proxy:!0}:null,t.isActiveSectionData()&&t.isDataLoaded?{key:"table-caption",fn:function(){return[t._v(" "+t._s(`–î–∞–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –¥–ª—è ${t.table.items.filter((t=>t.isClassDataFilled)).length} / ${t.table.items.length} –∫–ª–∞—Å—Å–æ–≤ (${(t.table.items.filter((t=>t.isClassDataFilled)).length/t.table.items.length*100).toFixed(2)}%)`)+" ")]},proxy:!0}:null,{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center my-2"},[e("b-spinner",{staticClass:"align-middle"}),e("strong",[t._v("Loading...")])],1)]},proxy:!0}],null,!0)})],1):e("div",[e("h4",[t._v("–î–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.")]),e("b",[t._v(" –ñ—É—Ä–Ω–∞–ª –µ—â—ë –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–ø–æ–ª–Ω–∏–ª")]),t._v(" "),e("br"),e("i",[e("b-link",{on:{click:function(e){return e.preventDefault(),t.genDataForToday.apply(null,arguments)}}},[t._v("–°–≥–µ–Ω–µ–Ω—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ?")])],1)])])},rt=[],ot=s(2116),lt={name:"AdminContent",data(){return{isDataExists:!0,isDataLoaded:!1,showFormulas:!1,table:{items:[],fields:[],formulas:{data:{"1_4":{global_amount:()=>this.table.items.filter((t=>{const e=t.name.match(/\d+/),s=e&&parseInt(e[0]);return null!==s&&s<5})).reduce(((t,e)=>t+e.students.length),0),global_absentAmount:()=>this.table.items.filter((t=>{const e=t.name.match(/\d+/),s=e&&parseInt(e[0]);return null!==s&&s<5})).reduce(((t,e)=>t+e.absent.global.length),0)},"5_11":{global_amount:()=>this.table.items.filter((t=>{const e=t.name.match(/\d+/),s=e&&parseInt(e[0]);return null!==s&&s>=5})).reduce(((t,e)=>t+e.students.length),0),global_absentAmount:()=>this.table.items.filter((t=>{const e=t.name.match(/\d+/),s=e&&parseInt(e[0]);return null!==s&&s>=5})).reduce(((t,e)=>t+e.absent.global.length),0)},global:{global_amount:()=>this.table.items.reduce(((t,e)=>t+e.students.length),0),global_absentAmount:()=>this.table.items.reduce(((t,e)=>t+e.absent.global.length),0)}}}},template_table_fields:{data:[{key:"name",label:"–ö–ª–∞—Å—Å",sortable:!0},{key:"students.length",label:"–ö–æ–ª-–≤–æ",sortable:!0},{key:"absent",label:"–§–∞–º–∏–ª–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–≤—à–∏—Ö"},{key:"owners",label:"–ö–ª. —Ä—É–∫."},{key:"isClassDataFilled",label:"–ó–∞–ø–æ–ª–Ω–µ–Ω–æ?",sortable:!0}],classes:[{key:"name",label:"–ö–ª–∞—Å—Å",sortable:!0},{key:"students.length",label:"–ö–æ–ª-–≤–æ"},{key:"students",label:"–£—á–∞—â–∏–µ—Å—è"},{key:"owners",label:"–ö–ª. —Ä—É–∫."}],users:[{key:"name",label:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"},{key:"roles",label:"–†–æ–ª–∏"},{key:"classes",label:"–ö–ª–∞—Å—Å—ã"}],invites:[{key:"body.name",label:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"},{key:"id",label:"ID"},{key:"secret",label:"–°–µ–∫—Ä–µ—Ç"}]},raw_data:Object,expandedRowIds:[],pinedExpandedRowIds:[],activeSection:String,sectionDataMethods:{data:this.getData,classes:this.getClasses,users:this.getUsers,invites:this.getInvites},tableDataDates:"",calendarDate:""}},beforeMount(){this.$root.$off("renderContentSection",this.handleRenderContentSection),this.$root.$off("calendar:call"),this.$root.$off("exportData")},async mounted(){this.handleRenderContentSection=async(t,...e)=>{this.activeSection=t,this.isDataLoaded=!1,this.tableDataDates="",console.log(t,"-",e),this.sectionDataMethods[t]?(this.raw_data=await this.sectionDataMethods[t](...e),this.isDataExists=null!==this.raw_data,this.updateTableFields(t),await new Promise((t=>setTimeout(t,200))),null!==this.raw_data&&(this.table.items="data"===t?Object.keys(this.raw_data).map((t=>({id:t,...this.raw_data[t]}))):this.raw_data),this.isDataLoaded=!0):console.warn(`Unknown section: ${t}`),this.$root.$emit("context:show",t)},this.$root.$on("renderContentSection",this.handleRenderContentSection),this.$root.$on("calendar:call",(()=>{this.$root.$emit("calendar:response",this.calendarDate)})),this.$root.$on("exportData",(()=>{this.exportExcel()}))},methods:{getCurrentDateFormatted(){const t=new Date,e=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${e}-${s}-${a}`},async getData(t=null,e=null){let s="/api/org/data";return t?(e?(s="/api/org/data-summary?startDate="+t+"&endDate="+e,this.tableDataDates=t+"-"+e):(s+="/"+t,this.tableDataDates=t),this.calendarDate=t):(this.tableDataDates=this.getCurrentDateFormatted(),this.calendarDate=null),(await this.$root.$makeApiRequest(s)).data},async genDataForToday(){const t=await this.$root.$makeApiRequest("/api/org/data","POST");204===t?this.$root.$emit("renderContentSection","data"):alert("–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º, –µ—Å–ª–∏ —ç—Ç–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è")},async getClasses(){return await this.$root.$makeApiRequest("/api/org/classes")},async getUsers(){return await this.$root.$makeApiRequest("/api/org/users")},async getInvites(){return await this.$root.$makeApiRequest("/api/org/invites")},updateTableFields(t){this.template_table_fields[t]?this.table.fields=this.template_table_fields[t]:console.warn(`Field type '${t}' does not exist in template_table_fields.`)},toggleDetails(t){this.expandedRowIds=[];const e=this.expandedRowIds.indexOf(t);-1!==e?this.expandedRowIds.splice(e,1):this.expandedRowIds.push(t)},isRowExpanded(t){return this.expandedRowIds.includes(t)},onRowSelected(t){console.log(this.activeSection," - ",t),0!==t.length?(this.toggleDetails(t[0].id),this.$root.$emit("context:show",this.activeSection,t)):(this.$root.$emit("context:hide"),this.expandedRowIds=[])},isActiveSectionData(){return"data"===this.activeSection},rowClass(t){return{"bg-danger text-white":!t.item.isClassDataFilled}},exportExcel(){const t=this.table.items.slice().sort(((t,e)=>{const s=t.name.replace(/_/g,"").toUpperCase(),a=e.name.replace(/_/g,"").toUpperCase(),i=s.match(/^\d+/),n=i?.[0]?parseInt(i[0]):null,r=a.match(/^\d+/),o=r?.[0]?parseInt(r[0]):null;if(n!==o)return n-o;const l=s.slice(-1),c=a.slice(-1);return l.localeCompare(c)})),e=t.map((t=>[t.name,t.students.length,t.absent.global.length,t.absent.ORVI.join(", ")||"",t.absent.respectful.join(", ")||"",t.absent.not_respectful.join(", ")||"",t.absent.fstudents.join(", ")||"",t.owners.map((t=>t.name)).join(", ")||""])),s=t.findIndex((t=>{const e=t.name.match(/\d+/);return e&&5===parseInt(e[0])})),a=["–ö–ª–∞—Å—Å","–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—â–∏—Ö—Å—è –≤ –∫–ª–∞—Å—Å–µ","–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –≤ –∫–ª–∞—Å—Å–µ","–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ –û–†–í–ò (—Ñ–∞–º–∏–ª–∏–∏)","–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–∏—á–∏–Ω–µ (—Ñ–∞–º–∏–ª–∏–∏)","–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ –Ω–µ—É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–∏—á–∏–Ω–µ (—Ñ–∞–º–∏–ª–∏–∏)","–ò–∑ –Ω–∏—Ö –±–µ—Å–ø–ª–∞—Ç–Ω–∏–∫–∏ (—Ñ–∞–º–∏–ª–∏–∏)","–ö–ª–∞—Å—Å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å (—Ñ–∞–º–∏–ª–∏—è, –∏–Ω–∏—Ü–∏–∞–ª—ã)"],i=[["1-4 –∫–ª–∞—Å—Å—ã",`=SUM(B2:B${s+1})`,`=SUM(C2:C${s+1})`,"","","",""],["5-11 –∫–ª–∞—Å—Å—ã",`=SUM(B${s+2}:B${t.length+1})`,`=SUM(C${s+2}:C${t.length+1})`,"","","",""],["–í—Å–µ–≥–æ",`=SUM(B2:B${t.length+1})`,`=SUM(C2:C${t.length+1})`,"","","",""]],n=[];for(const l of i){const e=l[0],a="1-4 –∫–ª–∞—Å—Å—ã"===e?2:"5-11 –∫–ª–∞—Å—Å—ã"===e?s+2:2,i="1-4 –∫–ª–∞—Å—Å—ã"===e?s+1:t.length+1,r=`=TEXTJOIN(", ", TRUE, D${a}:D${i})`,o=`=TEXTJOIN(", ", TRUE, E${a}:E${i})`,c=`=TEXTJOIN(", ", TRUE, F${a}:F${i})`,d=`=TEXTJOIN(", ", TRUE, G${a}:G${i})`;n.push([...l.slice(0,3),r,o,c,d])}const r=ot.Wp.aoa_to_sheet([a,...e,...n.map((t=>t.map((t=>"string"===typeof t&&t.startsWith("=")?{f:t,v:"–û–±–Ω–æ–≤–∏—Ç–µ —è—á–µ–π–∫—É"}:t))))]),o=ot.Wp.book_new();ot.Wp.book_append_sheet(o,r,"Sheet1"),ot.Wp.sheet_to_formulae(o),ot._h(o,`${this.tableDataDates}.xlsx`)}}},ct=lt,dt=(0,u.A)(ct,nt,rt,!1,null,"4c1efc1a",null),ut=dt.exports,ht=function(){var t=this,e=t._self._c;return e("div",[e("b-modal",{ref:"modal",attrs:{title:this.Interface.title.toString()},on:{hide:t.closeModal},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"secondary"},on:{click:t.closeModal}},[t._v("–ó–∞–∫—Ä—ã—Ç—å")]),e("b-button",{attrs:{variant:"primary",type:"submit"},on:{click:t.submitForm}},[t._v("–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å")])]},proxy:!0}])},[e("div",[e("notificationsForm",{attrs:{notifications:t.notifications}}),t.showModal?e(this.Interface.type,{tag:"component",attrs:{action:this.Interface.action,entity:this.contextData}}):t._e()],1)]),t.showContextOptions?e("div",[e("h3",{staticStyle:{"border-bottom":"#2c3e50 1px dotted"}},[t._v(t._s(t.contextData.name))]),e("b-button-group",{staticClass:"mt-2",attrs:{vertical:""}},t._l(t.contextOptions,(function(s,a){return e("div",{key:a},[e("b-button",{staticClass:"w-100",attrs:{variant:s._variant,disabled:!s.isActiveWithoutEntity&&!t.isEntitySelected},on:{click:s.foo}},[t._v(" "+t._s(s.label)+" ")])],1)})),0)],1):t._e()],1)},pt=[],mt=function(){var t=this,e=t._self._c;return e("div",["edit"===t.action?e("div",[e("b-form",{attrs:{title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤."}},[e("h4",[t._v("–ö–ª–∞—Å—Å: "+t._s(t.updatedClass.name))]),e("b-container",[e("b-dropdown",{staticClass:"mb-3",attrs:{size:"sm",variant:"outline-secondary",block:"","menu-class":"dropdown-scrollable w-100"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon",{attrs:{icon:"person-fill"}}),t._v(" "+t._s(t.selectedStudentText)+" ")]},proxy:!0}],null,!1,4209095034)},[e("b-dropdown-form",[e("b-form-group",{staticClass:"mb-0",attrs:{label:"–ü–æ–∏—Å–∫ —É—á–µ–Ω–∏–∫–∞:","label-for":"student-search-input","label-cols-md":"auto","label-size":"sm"}},[e("b-form-input",{attrs:{id:"student-search-input",type:"search",size:"sm",autocomplete:"off"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1)],1),t._l(t.availableStudents,(function(s){return e("b-dropdown-item",{key:s.value,class:{"text-danger":s.fstudent,"text-muted":s.disabled},attrs:{disabled:s.disabled},on:{click:function(e){!s.disabled&&t.selectStudent(s.value)}}},[t._v(" "+t._s(s.text)+" "),s.disabled?e("span",{staticClass:"text-muted"},[t._v(" (–£–∂–µ –≤ —Å–ø–∏—Å–∫–µ "+t._s(s.list)+") ")]):t._e(),s.fstudent?e("span",{staticClass:"text-warning"},[t._v("(–ë–µ—Å–ø–ª–∞—Ç–Ω–∏–∫)")]):t._e()])}))],2),e("b-row",[e("b-col",[e("h6",[t._v("–°–ø–∏—Å–æ–∫ –û–†–í–ò —É—á–µ–Ω–∏–∫–æ–≤:")]),t._l(t.updatedClass.absent.ORVI,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(s)+" "),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:function(e){return t.removeORVITag(a)}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)})),e("b-button",{attrs:{variant:"primary"},on:{click:t.addORVIStudent}},[t._v("–î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞")])],2),e("b-col",[e("h6",[t._v("–°–ø–∏—Å–æ–∫ —É–≤–∞–∂. –ø—Ä–∏—á. —É—á–µ–Ω–∏–∫–æ–≤:")]),t._l(t.updatedClass.absent.respectful,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(s)+" "),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:function(e){return t.removeRespTag(a)}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)})),e("b-button",{attrs:{variant:"primary"},on:{click:t.addRespStudent}},[t._v("–î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞")])],2),e("b-col",[e("h6",[t._v("–°–ø–∏—Å–æ–∫ –Ω–µ—É–≤–∞–∂. –ø—Ä–∏—á. —É—á–µ–Ω–∏–∫–æ–≤:")]),t._l(t.updatedClass.absent.not_respectful,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(s)+" "),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:function(e){return t.removeNotRespTag(a)}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)})),e("b-button",{attrs:{variant:"primary"},on:{click:t.addNotRespStudent}},[t._v("–î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞")])],2)],1)],1)],1)],1):t._e()])},bt=[],ft={name:"editAbsent",props:{action:{type:String,required:!0},entity:{type:Object,required:!0}},data(){return{modalTitle:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö",updatedClass:{...this.entity},students:this.entity.students||[],selectedStudent:"",searchQuery:"",calendarDate:null,isCustomDate:!1}},computed:{availableStudents(){const t={ORVI:new Set(this.updatedClass.absent.ORVI),respectful:new Set(this.updatedClass.absent.respectful),not_respectful:new Set(this.updatedClass.absent.not_respectful),fstudents:new Set(this.updatedClass.absent.fstudents)};return this.students.map((e=>{const s=t.ORVI.has(e),a=t.respectful.has(e),i=t.not_respectful.has(e),n=t.fstudents.has(e);return{value:e,text:e,disabled:s||a||i,fstudent:n,list:s?"–û–†–í–ò":a?"–£–≤–∞–∂. –ø—Ä–∏—á.":i?"–ù–µ—É–≤–∞–∂. –ø—Ä–∏—á.":""}})).filter((t=>t.text.toLowerCase().includes(this.searchQuery.toLowerCase())))},selectedStudentText(){return this.selectedStudent||"–í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞"}},methods:{selectStudent(t){this.selectedStudent=t},isStudentFree(){return this.selectedStudent&&!this.updatedClass.absent.ORVI.includes(this.selectedStudent)&&!this.updatedClass.absent.respectful.includes(this.selectedStudent)&&!this.updatedClass.absent.not_respectful.includes(this.selectedStudent)},addORVIStudent(){this.isStudentFree()&&(this.updatedClass.absent.ORVI.push(this.selectedStudent),this.selectedStudent="",this.searchQuery="")},addRespStudent(){this.isStudentFree()&&(this.updatedClass.absent.respectful.push(this.selectedStudent),this.selectedStudent="",this.searchQuery="")},addNotRespStudent(){this.isStudentFree()&&(this.updatedClass.absent.not_respectful.push(this.selectedStudent),this.selectedStudent="",this.searchQuery="")},removeORVITag(t){this.updatedClass.absent.ORVI.splice(t,1)},removeRespTag(t){this.updatedClass.absent.respectful.splice(t,1)},removeNotRespTag(t){this.updatedClass.absent.not_respectful.splice(t,1)}},beforeMount(){this.$root.$off("form:confirm"),this.$root.$off("calendar:response")},mounted(){this.$root.$emit("calendar:call"),this.$root.$on("calendar:response",(t=>{t?(this.calendarDate=t,this.isCustomDate=!0):(this.isCustomDate=!1,this.calendarDate="")})),this.$root.$on("form:confirm",(async()=>{let t,e;if(await this.$root.$emit("calendar:call"),this.isCustomDate?(t="–í—ã —É–≤–µ—Ä–µ–Ω—ã? –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∏–∑–º–µ–Ω–µ–Ω—ã –¥–ª—è "+this.calendarDate,e="/api/org/classes/"+this.entity.id+"/data/"+this.calendarDate):(t="–í—ã —É–≤–µ—Ä–µ–Ω—ã? –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∏–∑–º–µ–Ω–µ–Ω—ã –¥–ª—è –∞–∫—É—Ç–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã",e="/api/org/classes/"+this.entity.id+"/data"),confirm(t)){const t=await this.$root.$makeApiRequest(e,"PUT",{absent:this.updatedClass.absent});200===t||204===t?this.$root.$emit("notification","success"):this.$root.$emit("notification","error")}}))}},vt=ft,_t=(0,u.A)(vt,mt,bt,!1,null,"041f9803",null),gt=_t.exports,wt=function(){var t=this,e=t._self._c;return e("div",["create"===t.action?e("div",[e("b-form",{attrs:{title:"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å"},on:{submit:function(e){return e.preventDefault(),t.createClass.apply(null,arguments)}}},[e("h5",[t._v(" –ö–ª–∞—Å—Å: ")]),e("b-form-group",{attrs:{"label-for":"class-name","invalid-feedback":"–ò–º—è –∫–ª–∞—Å—Å–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"}},[e("b-input",{attrs:{id:"class-name",required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∫–ª–∞—Å—Å–∞",state:!!t.isFormValid||null},model:{value:t.newClass.name,callback:function(e){t.$set(t.newClass,"name",e)},expression:"newClass.name"}})],1),e("b-dropdown",{staticClass:"mb-3",attrs:{size:"sm",variant:"outline-secondary",block:"","menu-class":"dropdown-scrollable w-100"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon",{attrs:{icon:"person-fill"}}),t._v(" "+t._s(t.selectedOwnerText)+" ")]},proxy:!0}],null,!1,1281635058)},[e("b-dropdown-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.createClass.apply(null,arguments)}}},[e("b-form-group",{staticClass:"mb-0",attrs:{label:"–ü–æ–∏—Å–∫ –≤–ª–∞–¥–µ–ª—å—Ü–∞:","label-for":"student-search-input","label-cols-md":"auto","label-size":"sm"}},[e("b-form-input",{attrs:{id:"student-search-input",type:"search",size:"sm",autocomplete:"off"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1)],1),t._l(t.availableOwners,(function(s){return e("b-dropdown-item",{key:s.id,class:{"text-muted":s.disabled},on:{click:function(e){return t.selectOwner(s)}}},[t._v(" "+t._s(s.name)+" "),s.disabled?e("span",{staticClass:"text-muted"},[t._v(" (–ò–º–µ–µ—Ç –∫–ª–∞—Å—Å: "+t._s(s.classes.map((t=>t.name)).join(", "))+") ")]):t._e()])}))],2)],1)],1):t._e(),"edit"===t.action?e("div",[e("b-table",{attrs:{items:t.students,fields:[{label:"–ò–º—è",key:"name"},{label:"–°—Ç–∞—Ç—É—Å",key:"isFree"}]},scopedSlots:t._u([{key:"cell(name)",fn:function(s){return[e("span",{on:{click:function(e){return t.openEditModal(s.item)}}},[t._v(t._s(s.item.name))])]}},{key:"cell(isFree)",fn:function(s){return[e("b-form-checkbox",{on:{change:function(e){return t.toggleFreeStudent(s.item)}},model:{value:s.item.isFree,callback:function(e){t.$set(s.item,"isFree",e)},expression:"data.item.isFree"}},[t._v(" –ë–µ—Å–ø–ª–∞—Ç–Ω–∏–∫ ")])]}},{key:"cell(actions)",fn:function(s){return[e("b-button",{attrs:{size:"sm"},on:{click:function(e){return e.stopPropagation(),t.deleteStudent(s.item)}}},[t._v("–£–¥–∞–ª–∏—Ç—å")])]}}],null,!1,1786117684)}),e("b-button",{attrs:{variant:"primary"},on:{click:function(e){t.showAddModal=!0}}},[t._v("–î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞")]),e("b-modal",{attrs:{title:"–î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.addStudent.apply(null,arguments)}}},[t._v("–î–æ–±–∞–≤–∏—Ç—å")]),e("b-button",{attrs:{variant:"secondary"},on:{click:function(e){t.showAddModal=!1}}},[t._v("–û—Ç–º–µ–Ω–∞")])]},proxy:!0}],null,!1,1492512613),model:{value:t.showAddModal,callback:function(e){t.showAddModal=e},expression:"showAddModal"}},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.addStudent.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"–ò–º—è —É—á–µ–Ω–∏–∫–∞","label-for":"new-student-name"}},[e("b-form-input",{attrs:{id:"new-student-name",required:""},model:{value:t.newStudentName,callback:function(e){t.newStudentName=e},expression:"newStudentName"}})],1)],1)],1),e("b-modal",{attrs:{title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—á–µ–Ω–∏–∫–∞"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[e("b-button",{attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.updateStudent.apply(null,arguments)}}},[t._v(" –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å")]),e("b-button",{attrs:{variant:"secondary"},on:{click:function(e){t.showAddModal=!1}}},[t._v("–û—Ç–º–µ–Ω–∞")])]},proxy:!0}],null,!1,1685678696),model:{value:t.showEditModal,callback:function(e){t.showEditModal=e},expression:"showEditModal"}},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.updateStudent.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"–ò–º—è —É—á–µ–Ω–∏–∫–∞","label-for":"edit-student-name"}},[e("b-form-input",{attrs:{id:"edit-student-name",required:""},model:{value:t.newStudentName,callback:function(e){t.newStudentName=e},expression:"newStudentName"}})],1)],1)],1)],1):t._e(),"rename"===t.action?e("div",[e("b-form",{on:{submit:function(t){t.preventDefault()}}},[e("b-input",{attrs:{placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è –∫–ª–∞—Å—Å–∞"},model:{value:t.newClassName,callback:function(e){t.newClassName=e},expression:"newClassName"}}),e("b-card-text",{staticClass:"text-center mt-21"},[t._v(" "+t._s(t.entity.name)+" -> "+t._s(t.newClassName))])],1)],1):t._e(),"delete"===t.action?e("div",[e("p",[t._v(" –ü—Ä–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–∏, –∫–ª–∞—Å—Å "),e("b",[t._v(t._s(this.entity.name))]),t._v(" –±—É–¥–µ—Ç "),e("b",[t._v(" –±–µ–∑–≤–æ–≤—Ä–∞—Ç–Ω–æ")]),t._v(" —É–¥–∞–ª—ë–Ω. "),e("br"),e("ul",[e("li",[t._v("–í–ª–∞–¥–µ–ª–µ—Ü: "),e("i",[t._v(t._s(this.entity.owners?this.entity.owners.map((t=>t.name||"")).join(", "):"–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"))])]),e("li",[t._v("–ö–æ–ª-–≤–æ —É—á–µ–Ω–∏–∫–æ–≤: "+t._s(this.entity.students.length))])])])]):t._e()])},yt=[],Ct={name:"classesInterface",props:{action:{type:String,required:!0},entity:{type:Object,required:!0}},data(){return{formData:{...this.entity},raw_data:[],newClass:{name:"",owner:""},isFormValid:!1,selectedOwner:"",searchQuery:"",availableOwners:[],students:[],selectedStudent:"",newStudentName:"",showEditModal:!1,showAddModal:!1,newClassName:""}},beforeMount(){this.$root.$off("form:confirm")},mounted(){switch(this.action){case"create":this.getOwners(),this.$root.$on("form:confirm",(()=>{this.createClass()}));break;case"edit":this.getStudents(),this.$root.$on("form:confirm",(async()=>{await this.saveNewStudents()}));break;case"rename":this.$root.$on("form:confirm",(async()=>{await this.renameClass()}));break;case"delete":this.$root.$on("form:confirm",(async()=>{await this.deleteClass()}));break}},computed:{selectedOwnerText(){return this.selectedOwner.name||"–í—ã–±–µ—Ä–∏—Ç–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞"}},methods:{async getStudents(){this.raw_data=await this.$root.$makeApiRequest("/api/org/classes/"+this.entity.id+"/students");const{fstudents:t,students:e}=this.raw_data;this.students=e.map((e=>({name:e,isFree:t.includes(e)}))),this.localFreeStudents=new Set(t)},async getOwners(){this.raw_data=await this.$root.$makeApiRequest("/api/org/users"),this.availableOwners=this.raw_data.map((t=>({name:t.name,id:t.id,roles:t.roles,disabled:t.classes&&t.classes.length>0,classes:t.classes}))).sort(((t,e)=>t.disabled===e.disabled?0:t.disabled?1:-1))},selectOwner(t){this.selectedOwner=t,this.newClass.owner=t.id},toggleFreeStudent(t){t.isFree?this.localFreeStudents.add(t.name):this.localFreeStudents.delete(t.name)},editStudent(t){this.selectedStudent={...t},this.showEditModal=!0},async addStudent(){""!==this.newStudentName.trim()&&(this.students.push({name:this.newStudentName,isFree:!1}),this.localFreeStudents.delete(this.newStudentName),this.newStudentName="",this.showAddModal=!1)},deleteStudent(t){const e=this.students.indexOf(t);-1!==e&&(this.students.splice(e,1),this.localFreeStudents.delete(t.name))},openEditModal(t){this.selectedStudent={...t},this.showEditModal=!0},async updateStudent(){const t=this.students.findIndex((t=>t.name===this.selectedStudent.name));-1!==t&&(this.students[t].name=this.newStudentName),this.newStudentName="",this.showEditModal=!1},async createClass(){if(!this.newClass.name)return this.isFormValid=!1,void this.$root.$emit("notification","warning","–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∫–ª–∞—Å—Å–∞");const t=await this.$root.$makeApiRequest("/api/org/classes","POST",this.newClass);204===t?this.$root.$emit("notification","success",""):this.$root.$emit("notification","error","")},async saveNewStudents(){const t=Array.from(this.localFreeStudents),e={students:this.students.map((t=>t.name)),fstudents:t};try{const t=await this.$root.$makeApiRequest("/api/org/classes/"+this.entity.id+"/students","PUT",e);204===t?this.$root.$emit("notification","success"):this.$root.$emit("notification","error")}catch(s){console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:",s)}},async renameClass(){const t=await this.$root.$makeApiRequest("/api/org/classes/"+this.entity.id,"PATCH",{name:this.newClassName});204===t?this.$root.$emit("notification","success"):this.$root.$emit("notification","error")},async deleteClass(){const t=await this.$root.$makeApiRequest("/api/org/classes/"+this.entity.id,"DELETE");204===t?this.$root.$emit("notification","success"):this.$root.$emit("notification","error")}}},kt=Ct,$t=(0,u.A)(kt,wt,yt,!1,null,"0baeb213",null),St=$t.exports,xt=function(){var t=this,e=t._self._c;return e("div",["create"===t.action?e("div",[e("createUser")],1):t._e(),"edit"===t.action?e("div",[e("editUser",{attrs:{entity:t.entity_buff}})],1):t._e(),"reset"===t.action?e("div",[e("b-form",[e("b-form-group",{attrs:{title:"–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å"}},[e("b-form-input",{attrs:{placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"},model:{value:t.newUserPassword,callback:function(e){t.newUserPassword=e},expression:"newUserPassword"}})],1)],1)],1):t._e(),"delete"===t.action?e("div",[e("p",[t._v(" –ü—Ä–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "),e("b",[t._v(t._s(this.entity_buff.name))]),t._v(" –±—É–¥–µ—Ç "),e("b",[t._v("–±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ")]),t._v(" —É–¥–∞–ª—ë–Ω. "),e("br"),e("ul",[e("li",[t._v("–ö–ª–∞—Å—Å—ã: "+t._s(this.entity_buff.classes?this.entity_buff.classes.map((t=>t.name||"")).join(", "):"-"))]),e("li",[t._v("–†–æ–ª–∏: "+t._s(this.entity_buff.roles?this.entity_buff.roles.map((t=>t)).join(", "):"-"))])])])]):t._e()])},Dt=[],It=function(){var t=this,e=t._self._c;return e("b-form",{on:{submit:function(t){t.preventDefault()}}},[e("b-form-group",{attrs:{label:"–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}},[e("b-form-input",{attrs:{required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("b-form-group",{attrs:{label:"–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}},[e("b-form-input",{attrs:{required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"},model:{value:t.form.login,callback:function(e){t.$set(t.form,"login",e)},expression:"form.login"}}),e("b-form-input",{staticClass:"mt-2",attrs:{required:"",placeholder:"–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("b-form-group",{attrs:{label:"–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}},[e("b-form-checkbox",{model:{value:t.isTeacher,callback:function(e){t.isTeacher=e},expression:"isTeacher"}},[t._v("–ö–ª–∞—Å—Å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å")]),e("b-form-checkbox",{model:{value:t.isAdmin,callback:function(e){t.isAdmin=e},expression:"isAdmin"}},[t._v("–ó–∞–≤—É—á")])],1),e("b-form-group",{attrs:{label:"–ö–ª–∞—Å—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}},[e("b-dropdown",{staticClass:"mb-3",attrs:{size:"sm",variant:"outline-secondary",block:"","menu-class":"dropdown-scrollable w-100"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon",{attrs:{icon:"inboxes"}}),t._v(" –ö–ª–∞—Å—Å—ã ")]},proxy:!0}])},[e("b-dropdown-form",[e("b-form-group",{staticClass:"mb-0",attrs:{label:"–ü–æ–∏—Å–∫ –∫–ª–∞—Å—Å–∞:","label-for":"student-search-input","label-cols-md":"auto","label-size":"sm"}},[e("b-form-input",{attrs:{id:"student-search-input",type:"search",size:"sm",autocomplete:"off"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1)],1),t._l(t.availableClasses,(function(s){return e("b-dropdown-item",{key:s.value,class:{"text-muted":s.isHasOwners},attrs:{disabled:s.isInList},on:{click:function(e){return t.form.classes.push(s)}}},[t._v(" "+t._s(s.name)+" "),s.isHasOwners?e("span",{staticClass:"text-muted"},[t._v(" (–í–ª–∞–¥–µ–µ—Ç: "+t._s(s.owners.map((t=>t.name)).join(", "))+") ")]):t._e()])}))],2),t._l(t.form.classes,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(s.name)+" "),s.isHasOwners?e("span",{staticClass:"text-muted"},[t._v("–í–ª–∞–¥–µ–µ—Ç "+t._s(s.owners.map((t=>t.name)).join(", ")))]):t._e(),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:function(e){return t.removeTag(a)}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)}))],2)],1)},At=[],Ot={name:"createUser",props:{entity:{type:{},required:!1}},data(){return{form:{login:"",password:"",name:"",roles:[],classes:[]},isTeacher:!1,isAdmin:!1,raw_data:"",availableClassesList:[],searchQuery:""}},beforeMount(){this.$root.$off("interface:createUser")},mounted(){this.getClasses(),this.$root.$on("interface:createUser",(async()=>{if(""===this.form.login||""===this.form.password||""===this.form.name)return void this.$root.$emit("notification","warning","–ü–æ–ª—è –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å –∏ –∏–º—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω—ã");this.isTeacher&&this.form.roles.push("teacher"),this.isAdmin&&this.form.roles.push("admin"),console.log(this.form);let t=[];this.form.classes.map((e=>{t.push(e.id)})),this.form.classes=t;const e=await this.$root.$makeApiRequest("/api/org/users","POST",{...this.form,classes:t});204===e?this.$root.$emit("notification","success"):409===e?this.$root.$emit("notification","warning","–î–∞–Ω–Ω—ã–π –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å —É–∂–µ –∑–∞–Ω—è—Ç—ã"):this.$root.$emit("notification","error")}))},computed:{availableClasses(){return this.availableClassesList.map((t=>{const e=this.form.classes.some((e=>e.id===t.id));return{name:t.name,id:t.id,owners:t.owners,isHasOwners:t.isHasOwners,isInList:e}})).filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{async getClasses(){this.raw_data=await this.$root.$makeApiRequest("/api/org/classes"),this.availableClassesList=this.raw_data.map((t=>({name:t.name,id:t.id,owners:t.owners,isHasOwners:t.owners&&t.owners.length>0}))).sort(((t,e)=>t.isHasOwners===e.isHasOwners?0:t.isHasOwners?1:-1)),console.log(this.availableClassesList)},removeTag(t){this.form.classes.splice(t,1)}}},Rt=Ot,Tt=(0,u.A)(Rt,It,At,!1,null,"2dcf6dfa",null),Mt=Tt.exports,Ft=function(){var t=this,e=t._self._c;return e("b-tabs",{attrs:{"nav-class":"mb-4"},model:{value:t.currentTabIndex,callback:function(e){t.currentTabIndex=e},expression:"currentTabIndex"}},[e("b-tab",{attrs:{disabled:"",title:"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å"}},[e("b-form",[e("b-input",{attrs:{placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"},model:{value:t.newUserName,callback:function(e){t.newUserName=e},expression:"newUserName"}}),e("b-card-text",{staticClass:"text-center mt-2"},[t._v(" "+t._s(t.entity_buff.name)+" "),e("b-icon",{attrs:{icon:"arrow-right"}}),t._v(" "+t._s(t.newUserName))],1)],1)],1),e("b-tab",{attrs:{title:"–ö–ª–∞—Å—Å—ã"}},[e("b-form-group",{attrs:{label:"–ö–ª–∞—Å—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}},[e("b-dropdown",{staticClass:"mb-3",attrs:{size:"sm",variant:"outline-secondary",block:"","menu-class":"dropdown-scrollable w-100"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon",{attrs:{icon:"inboxes"}}),t._v(" –ö–ª–∞—Å—Å—ã ")]},proxy:!0}])},[e("b-dropdown-form",[e("b-form-group",{staticClass:"mb-0",attrs:{label:"–ü–æ–∏—Å–∫ –∫–ª–∞—Å—Å–∞:","label-for":"student-search-input","label-cols-md":"auto","label-size":"sm"}},[e("b-form-input",{attrs:{id:"student-search-input",type:"search",size:"sm",autocomplete:"off"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1)],1),t._l(t.availableClasses,(function(s){return e("b-dropdown-item",{key:s.value,class:{"text-muted":s.isHasOwners},attrs:{disabled:s.isInList},on:{click:function(e){return t.entity_buff.classes.push(s)}}},[t._v(" "+t._s(s.name)+" "),s.isHasOwners?e("span",{staticClass:"text-muted"},[t._v(" (–í–ª–∞–¥–µ–µ—Ç: "+t._s(s.owners.map((t=>t.name)).join(", "))+") ")]):t._e()])}))],2),t._l(t.entity_buff.classes,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(s.name)+" "),s.isHasOwners?e("span",{staticClass:"text-muted"},[t._v("–í–ª–∞–¥–µ–µ—Ç "+t._s(s.owners.map((t=>t.name)).join(", ")))]):t._e(),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:function(e){return t.removeTag(a)}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)}))],2)],1),e("b-tab",{attrs:{title:"–†–æ–ª–∏"}},[e("b-form-group",{attrs:{label:"–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}},[e("b-form-checkbox",{model:{value:t.isTeacher,callback:function(e){t.isTeacher=e},expression:"isTeacher"}},[t._v("–ö–ª–∞—Å—Å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å")]),e("b-form-checkbox",{model:{value:t.isAdmin,callback:function(e){t.isAdmin=e},expression:"isAdmin"}},[t._v("–ó–∞–≤—É—á")])],1)],1)],1)},Vt=[],Et={name:"editUser",props:{entity:{type:Object,required:!0}},data(){return{entity_buff:{...this.entity},currentTabIndex:0,newUserName:"",raw_data:"",availableClassesList:[],searchQuery:"",roles:[],isTeacher:!1,isAdmin:!1}},beforeMount(){this.$root.$off("interface:editUser")},mounted(){this.isTeacher=this.entity_buff.roles.includes("teacher"),this.isAdmin=this.entity_buff.roles.includes("admin"),console.log(this.entity),this.getClasses(),this.$root.$on("interface:editUser",(()=>{this.handleEditConfirm()}))},computed:{availableClasses(){return this.availableClassesList.map((t=>{const e=this.entity_buff.classes.some((e=>e.id===t.id));return{name:t.name,id:t.id,owners:t.owners,isHasOwners:t.isHasOwners,isInList:e}})).filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{async handleEditConfirm(){this.isTeacher&&this.roles.push("teacher"),this.isAdmin&&this.roles.push("admin");let t=[];this.entity_buff.classes.map((e=>{t.push(e.id)}));const e=await this.$root.$makeApiRequest("/api/org/users/"+this.entity.id,"PUT",{classes:t,roles:this.roles});204===e?this.$root.$emit("notification","success"):this.$root.$emit("notification","error")},async getClasses(){this.raw_data=await this.$root.$makeApiRequest("/api/org/classes"),this.availableClassesList=this.raw_data.map((t=>({name:t.name,id:t.id,owners:t.owners,isHasOwners:t.owners&&t.owners.length>0}))).sort(((t,e)=>t.isHasOwners===e.isHasOwners?0:t.isHasOwners?1:-1)),console.log(this.availableClassesList)},removeTag(t){this.entity_buff.classes.splice(t,1)}}},Nt=Et,Lt=(0,u.A)(Nt,Ft,Vt,!1,null,"7973e08f",null),Ut=Lt.exports,jt={name:"usersInterface",components:{createUser:Mt,editUser:Ut},props:{action:{type:String,required:!0},entity:{type:Object,required:!0}},data(){return{raw_data:{},currentTabIndex:0,entity_buff:{...this.entity},newUserPassword:""}},beforeMount(){this.$root.$off("form:confirm")},mounted(){switch(this.action){case"create":this.$root.$on("form:confirm",this.handleCreateUser);break;case"edit":this.$root.$on("form:confirm",this.handleEditUser);break;case"reset":this.$root.$on("form:confirm",this.resetPassword);break;case"delete":this.$root.$on("form:confirm",this.deleteUser);break}},computed:{},methods:{handleEditUser(){this.$root.$emit("interface:editUser")},async resetPassword(){""===this.newUserPassword&&this.$root.$emit("notification","warning","–ü–∞—Ä–æ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º");const t=await this.$root.$makeApiRequest("/api/org/users/"+this.entity_buff.id+"/password","PATCH",{password:this.newUserPassword});204===t?this.$root.$emit("notification","success"):this.$root.$emit("notification","error")},async deleteUser(){const t=await this.$root.$makeApiRequest("/api/org/users/"+this.entity.id,"DELETE");204===t?this.$root.$emit("notification","success"):this.$root.$emit("notification","error")},addClass(){const t={id:this.newClassId,name:this.newClassName};this.entity_buff.classes.push(t),this.newClassId="",this.newClassName=""},removeClass(t){this.entity_buff.classes.splice(t,1)},addRole(){this.newRole&&(this.entity_buff.roles.push(this.newRole),this.newRole="")},removeRole(t){this.entity_buff.roles.splice(t,1)},handleCreateUser(){this.$root.$emit("interface:createUser")}}},Pt=jt,qt=(0,u.A)(Pt,xt,Dt,!1,null,"3ffbfb7d",null),Qt=qt.exports,Ht=function(){var t=this,e=t._self._c;return e("div",["create"===t.action?e("div",[e("b-form",[e("b-form-group",{attrs:{label:"–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}},[e("b-form-input",{attrs:{placeholder:"–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),e("b-form-group",{attrs:{label:"–†–æ–ª–∏"}},[e("b-form-checkbox",{model:{value:t.isTeacher,callback:function(e){t.isTeacher=e},expression:"isTeacher"}},[t._v("–ö–ª–∞—Å—Å–Ω—ã–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å")]),e("b-form-checkbox",{model:{value:t.isAdmin,callback:function(e){t.isAdmin=e},expression:"isAdmin"}},[t._v("–ó–∞–≤—É—á")])],1),e("b-form-group",{attrs:{label:"–ö–ª–∞—Å—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"}},[e("b-dropdown",{staticClass:"mb-3",attrs:{size:"sm",variant:"outline-secondary",block:"","menu-class":"dropdown-scrollable w-100"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon",{attrs:{icon:"inboxes"}}),t._v(" –ö–ª–∞—Å—Å—ã ")]},proxy:!0}],null,!1,1705250403)},[e("b-dropdown-form",[e("b-form-group",{staticClass:"mb-0",attrs:{label:"–ü–æ–∏—Å–∫ –∫–ª–∞—Å—Å–∞:","label-for":"student-search-input","label-cols-md":"auto","label-size":"sm"}},[e("b-form-input",{attrs:{id:"student-search-input",type:"search",size:"sm",autocomplete:"off"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1)],1),t._l(t.availableClasses,(function(s){return e("b-dropdown-item",{key:s.value,class:{"text-muted":s.isHasOwners},attrs:{disabled:s.isInList},on:{click:function(e){return t.userClasses.push(s)}}},[t._v(" "+t._s(s.name)+" "),s.isHasOwners?e("span",{staticClass:"text-muted"},[t._v(" (–í–ª–∞–¥–µ–µ—Ç: "+t._s(s.owners.map((t=>t.name)).join(", "))+") ")]):t._e()])}))],2),t._l(t.userClasses,(function(s,a){return e("b-list-group-item",{key:a,staticClass:"d-flex justify-content-between align-items-center"},[t._v(" "+t._s(s.name)+" "),s.isHasOwners?e("span",{staticClass:"text-muted"},[t._v("–í–ª–∞–¥–µ–µ—Ç "+t._s(s.owners.map((t=>t.name)).join(", ")))]):t._e(),e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:function(e){return t.removeTag(a)}}},[e("b-icon",{attrs:{icon:"trash"}})],1)],1)}))],2),e("b-form-checkbox",{model:{value:t.isForceCreate,callback:function(e){t.isForceCreate=e},expression:"isForceCreate"}},[t._v("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π?")])],1)],1):t._e(),"delete"===t.action?e("div",[e("p",[t._v(" –ü—Ä–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–∏, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "),e("b",[t._v(t._s(this.entity_buff.body.name))]),t._v(" –±—É–¥–µ—Ç "),e("b",[t._v("–±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ")]),t._v(" —É–¥–∞–ª–µ–Ω–æ. "),e("br"),e("ul",[e("li",[t._v("–î–∞–Ω–Ω—ã–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è: "),e("ul",[e("li",[t._v("ID: "+t._s(this.entity_buff.id))]),e("li",[t._v("–°–µ–∫—Ä–µ—Ç: "+t._s(this.entity_buff.secret))])])]),e("li",[t._v("–ö–ª–∞—Å—Å—ã: "+t._s(this.entity_buff.body.classes?this.entity_buff.body.classes.map((t=>t.name||"")).join(", "):"-"))]),e("li",[t._v("–†–æ–ª–∏: "+t._s(this.entity_buff.body.roles?this.entity_buff.body.roles.map((t=>t)).join(", "):"-"))])])])]):t._e()])},zt=[],Wt={name:"invitesInterface",props:{action:{type:String,required:!0},entity:{type:Object,required:!0}},data(){return{raw_data:{},currentTabIndex:0,entity_buff:{...this.entity},userName:"",userRoles:[],userClasses:[],isTeacher:!1,isAdmin:!1,isForceCreate:!1,searchQuery:"",availableClassesList:[]}},beforeMount(){this.$root.$off("form:confirm")},mounted(){switch(this.action){case"create":this.$root.$on("form:confirm",this.handleCreateInvite),this.getClasses();break;case"delete":this.$root.$on("form:confirm",this.deleteInvite);break}},computed:{availableClasses(){return this.availableClassesList.map((t=>{const e=this.userClasses.some((e=>e.id===t.id));return{name:t.name,id:t.id,owners:t.owners,isHasOwners:t.isHasOwners,isInList:e}})).filter((t=>t.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{async getClasses(){this.raw_data=await this.$root.$makeApiRequest("/api/org/classes"),this.availableClassesList=this.raw_data.map((t=>({name:t.name,id:t.id,owners:t.owners,isHasOwners:t.owners&&t.owners.length>0}))).sort(((t,e)=>t.isHasOwners===e.isHasOwners?0:t.isHasOwners?1:-1)),console.log(this.availableClassesList)},removeTag(t){this.userClasses.splice(t,1)},async handleCreateInvite(){if(this.userRoles=[],this.isTeacher&&this.userRoles.push("teacher"),this.isAdmin&&this.userRoles.push("admin"),""===this.userName)return void this.$root.$emit("notification","warning","–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è");if(!this.isForceCreate){if(0===this.userRoles.length)return void this.$root.$emit("notification","warning","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ —Ä–æ–ª–µ–π –Ω–µ —Å–º–æ–∂–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ ");if(0===this.userClasses.length&&0!==this.userRoles.length)return void this.$root.$emit("notification","warning","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–º–æ–∂–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –≤—ã –Ω–µ –≤—ã–¥–µ–ª–∏—Ç–µ –µ–º—É –∫–ª–∞—Å—Å")}let t=[];this.userClasses.map((e=>{t.push(e.id)}));const e=await this.$root.$makeApiRequest("/api/org/invites","POST",{name:this.userName,classes:t,roles:this.userRoles});204===e?this.$root.$emit("notification","success"):this.$root.$emit("notification","error")},async deleteInvite(){const t=await this.$root.$makeApiRequest("/api/org/invites/"+this.entity.id,"DELETE");204===t?this.$root.$emit("notification","success"):this.$root.$emit("notification","error")}}},Bt=Wt,Gt=(0,u.A)(Bt,Ht,zt,!1,null,"d33c9d76",null),Jt=Gt.exports,Xt={name:"AdminContextMenu",components:{NotificationsForm:G},data(){return{Interface:{type:Object,action:String,title:String},showModal:!1,showContextOptions:!1,contextOptions:[],contextData:{},isEntitySelected:!1,notifications:[],template_contextOptions:{data:[{label:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤.",foo:()=>this.openModal(gt,"edit","–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ")},{label:"–ù–∞–ø–æ–º–Ω–∏—Ç—å –∫–ª–∞—Å. —Ä—É–∫.",foo:()=>this.openModal(gt,"remind"),_variant:"info"},{label:"–°–±—Ä–æ—Å–∏—Ç—å –∑–∞–ø–∏—Å—å - –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ",foo:()=>this.openModal(gt,"delete"),_variant:"danger"}],classes:[{label:"–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å",isActiveWithoutEntity:!0,foo:()=>this.openModal(St,"create","–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª–∞—Å—Å")},{label:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —É—á–∞—â–∏—Ö—Å—è",foo:()=>this.openModal(St,"edit","–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —É—á–∞—â–∏—Ö—Å—è")},{label:"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å",foo:()=>this.openModal(St,"rename","–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å")},{label:"–£–¥–∞–ª–∏—Ç—å –∫–ª–∞—Å—Å",foo:()=>this.openModal(St,"delete","–£–¥–∞–ª–∏—Ç—å –∫–ª–∞—Å—Å"),_variant:"danger"}],users:[{label:"–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",isActiveWithoutEntity:!0,foo:()=>this.openModal(Qt,"create","–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")},{label:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",foo:()=>this.openModal(Qt,"edit","–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")},{label:"–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å",foo:()=>this.openModal(Qt,"reset","–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å")},{label:"–£–¥–∞–ª–∏—Ç—å",foo:()=>this.openModal(Qt,"delete","–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"),_variant:"danger"}],invites:[{label:"–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ",isActiveWithoutEntity:!0,foo:()=>this.openModal(Jt,"create","–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ")},{label:"–£–¥–∞–ª–∏—Ç—å",foo:()=>this.openModal(Jt,"delete","–£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è"),_variant:"danger"}]}}},beforeMount(){this.$root.$off("context:show"),this.$root.$off("context:hide"),this.$root.$off("modal:hide"),this.$root.$off("notification")},mounted(){this.$root.$on("context:show",((t,e)=>{this.showContextOptions=!0,this.template_contextOptions[t]&&(this.contextOptions=this.template_contextOptions[t]),e?(this.contextData=e[0],this.isEntitySelected=!0):this.isEntitySelected=!1})),this.$root.$on("context:hide",(()=>{this.isEntitySelected=!1,this.contextData={},this.notifications=[]})),this.$root.$on("modal:hide",(()=>{this.notifications=[],this.closeModal()}))},methods:{openModal(t,e,s){this.Interface.type=t,this.Interface.action=e,this.Interface.title=s,this.$refs["modal"].show(),this.showModal=!0},closeModal(){this.$refs["modal"].hide(),this.showModal=!1,this.Interface.action=""},submitForm(){this.$root.$emit("form:confirm")}}},Yt=Xt,Kt=(0,u.A)(Yt,ht,pt,!1,null,"a40d7744",null),Zt=Kt.exports,te={name:"AdminView",components:{AdminContent:ut,AdminContextMenu:Zt},data(){return{hasAccess:!1,firstLoading:!0,compactMode:!1,showMoreData:!1,showCalendar:!0,contentSection:null,activeSection:this.contentSection||"data",sections:[{label:"–î–∞–Ω–Ω—ã–µ",value:"data",icon:"table"},{label:"–ö–ª–∞—Å—Å—ã",value:"classes",icon:"layers"},{label:"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏",value:"users",icon:"people"},{label:"–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è",value:"invites",icon:"envelope"}],calendarDate:"",showCustomDateInput:!1,showPeriodInput:!1,periodStartDate:null,periodEndDate:null}},async mounted(){this.firstLoading=!0,await new Promise((t=>setTimeout(t,600)));try{this.hasAccess=await this.$root.$checkAccessRole("admin")}catch(t){console.error("Error checking access:",t),this.hasAccess=!1}finally{this.firstLoading=!1}await new Promise((t=>setTimeout(t,100))),this.hasAccess&&this.$root.$emit("renderContentSection",this.activeSection)},computed:{isDateChosen(){return 0!==this.calendarDate.length}},methods:{handleSectionClick(t,e){if(this.activeSection=t,"date"===e){if(!this.isDateChosen)return void alert("–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É");this.$root.$emit("renderContentSection",this.activeSection,this.calendarDate)}else"period"===e?this.$root.$emit("renderContentSection",this.activeSection,this.periodStartDate,this.periodEndDate):this.$root.$emit("renderContentSection",this.activeSection)},toggleCompactMode(){this.compactMode=!this.compactMode},toggleShowCalendar(){this.showCalendar=!this.showCalendar},exportDataCall(){this.$root.$emit("exportData")}}},ee=te,se=(0,u.A)(ee,at,it,!1,null,"0461d29c",null),ae=se.exports,ie=function(){var t=this;t._self._c;return t._m(0)},ne=[function(){var t=this,e=t._self._c;return e("div",[e("b",[t._v("Not Found. 404.")]),t._v(" "),e("br"),t._v(" That url doesnt exists. ")])}],re={name:"NotFound"},oe=re,le=(0,u.A)(oe,ie,ne,!1,null,"1865525d",null),ce=le.exports;const de=()=>s.e(594).then(s.bind(s,9220));a["default"].use(r.Ay);const ue=[{path:"/",name:"home",component:p},{path:"/login",name:"login",component:x},{path:"/signup/invite",name:"signupInvite",component:T,props:()=>({orgID:""})},{path:"/signup/invite/:orgID",name:"signupInviteWithOrgId",component:T,props:t=>({orgID:t.params.orgID})},{path:"/about",name:"–û –Ω–∞—Å",component:de},{path:"/user",name:"–ö–ª. —Ä—É–∫.",component:st},{path:"/form/:classID",name:"–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–ª. —Ä—É–∫.",component:K},{path:"/org",name:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á—Ä–µ–∂–¥–µ–Ω–∏–µ–º",component:ae},{path:"/org/:section",name:"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á—Ä–µ–∂–¥–µ–Ω–∏–µ–º —Å —Ä–∞–∑–¥–µ–ª–æ–º",component:ae},
//! Should be latest
{path:"/:pathMatch(.*)*",name:"NotFound",component:ce}],he=new r.Ay({mode:"history",base:"/",routes:ue});n.A.defaults.headers.common["accept"]="application/json",n.A.defaults.responseType="json";var pe=he;let me=!1;function be(t){502===t.status&&alert("API-—Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ. –ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞")}var fe={install(t){me||(t.prototype.$makeApiRequest=async function(t,e="GET",s=null){try{let a;switch(e.toUpperCase()){case"POST":return a=await n.A.post(t,s),be(a),a.status;case"PATCH":return a=await n.A.patch(t,s),be(a),a.status;case"PUT":return a=await n.A.put(t,s),be(a),a.status;case"DELETE":return a=await n.A.delete(t),be(a),a.status;case"GET":default:return a=await n.A.get(t),be(a),a.data}}catch(a){if(409===a.response.status)return 409;if(!a.response||401!==a.response.status)throw console.log("API Error:",a),a;try{if(await this.$refreshAccessToken())return this.$makeApiRequest(t,e,s);alert("–ö–ª—é—á –¥–æ—Å—Ç—É–ø–∞ –∏—Å—Ç—ë–∫, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞"),await pe.push("/login")}catch(i){await pe.push("/login")}}},t.prototype.$refreshAccessToken=async()=>{try{const t=await n.A.post("/api/refresh-token");return 200===t.status}catch(t){throw console.error("Error refreshing access token:",t?.response?.data||t),t}},t.prototype.$checkAccessRole=async function(t){const e=await this.$makeApiRequest("/api/roles");return e.roles.includes(t)||(alert("–£ –≤–∞—Å –Ω–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É"),await pe.push("/")),!0},me=!0)}},ve=s(7673),_e=(s(9313),function(){var t=this,e=t._self._c,s=t._self._setupProxy;return e("div",{attrs:{id:"app"}},[e(s.AppNavbar),e("router-view"),e(s.AppFooter)],1)}),ge=[],we=function(){var t=this,e=t._self._c;return e("b-navbar",{staticClass:"w-100",attrs:{toggleable:"lg",type:"light",variant:"light"}},[e("b-navbar-brand",{staticStyle:{"font-family":"Arial, Helvetica, sans-serif"},attrs:{href:"/home"}},[t._v(" ‚íª Floaty ")]),e("b-navbar-nav",{staticClass:"ml-auto"},[e("b-button",{attrs:{variant:"outline-primary",href:"/login"}},[t._v("–í–æ–π—Ç–∏/–í—ã–π—Ç–∏")])],1)],1)},ye=[],Ce={name:"AppNavbar"},ke=Ce,$e=(0,u.A)(ke,we,ye,!1,null,"3e1922ff",null),Se=$e.exports,xe=function(){var t=this,e=t._self._c;return e("b-card-footer",[e("p",[t._v("¬© 2024 Floaty. All rights reserved.")])])},De=[],Ie={name:"AppFooter"},Ae=Ie,Oe=(0,u.A)(Ae,xe,De,!1,null,"761e9c49",null),Re=Oe.exports,Te=(0,a.defineComponent)({__name:"App",setup(t){return{__sfc:!0,AppNavbar:Se,AppFooter:Re}}}),Me=Te,Fe=(0,u.A)(Me,_e,ge,!1,null,null,null),Ve=Fe.exports;a["default"].use(i.vGs),a["default"].use(ve.YS),a["default"].use(fe),a["default"].config.productionTip=!1,new a["default"]({router:pe,render:t=>t(Ve)}).$mount("#app")}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,n){if(!a){var r=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],n=t[d][2];for(var o=!0,l=0;l<a.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[a,i,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.f={},s.e=function(t){return Promise.all(Object.keys(s.f).reduce((function(e,a){return s.f[a](t,e),e}),[]))}}(),function(){s.u=function(t){return"js/about.8d64da3e.js"}}(),function(){s.miniCssF=function(t){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="front:";s.l=function(a,i,n,r){if(t[a])t[a].push(i);else{var o,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==e+n){o=u;break}}o||(l=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",e+n),o.src=a),t[a]=[i];var h=function(e,s){o.onerror=o.onload=null,clearTimeout(p);var i=t[a];if(delete t[a],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((function(t){return t(s)})),e)return e(s)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var t={524:0};s.f.j=function(e,a){var i=s.o(t,e)?t[e]:void 0;if(0!==i)if(i)a.push(i[2]);else{var n=new Promise((function(s,a){i=t[e]=[s,a]}));a.push(i[2]=n);var r=s.p+s.u(e),o=new Error,l=function(a){if(s.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var n=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;o.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",o.name="ChunkLoadError",o.type=n,o.request=r,i[1](o)}};s.l(r,l,"chunk-"+e,e)}},s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,n,r=a[0],o=a[1],l=a[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)var d=l(s)}for(e&&e(a);c<r.length;c++)n=r[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},a=self["webpackChunkfront"]=self["webpackChunkfront"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(2849)}));a=s.O(a)})();
//# sourceMappingURL=app.8432d4af.js.map